{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/browser-check.js","webpack:///./src/components/keyboard.vue?1c77","webpack:///./src/App.vue?394f","webpack:///./src/components/knob.vue?0e8c","webpack:///src/components/knob.vue","webpack:///./src/components/knob.vue?374e","webpack:///./src/components/knob.vue","webpack:///./src/components/keyboard.vue?1bfb","webpack:///./src/key-events.js","webpack:///src/components/keyboard.vue","webpack:///./src/components/keyboard.vue?da31","webpack:///./src/components/keyboard.vue","webpack:///./src/components/sequencer.vue?436d","webpack:///src/components/sequencer.vue","webpack:///./src/components/sequencer.vue?a5df","webpack:///./src/components/sequencer.vue","webpack:///./src/components/zoom-scrollbar.vue?8518","webpack:///src/components/zoom-scrollbar.vue","webpack:///./src/components/zoom-scrollbar.vue?4391","webpack:///./src/components/zoom-scrollbar.vue","webpack:///./src/slider-config.js","webpack:///./src/observable.js","webpack:///./src/adsr.js","webpack:///./src/voice.js","webpack:///./src/file-export.js","webpack:///./src/file-import.js","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue","webpack:///./src/main.js","webpack:///./src/App.vue?f81e","webpack:///./src/components/sequencer.vue?3ae0","webpack:///./src/components/knob.vue?0931","webpack:///./src/components/zoom-scrollbar.vue?7973"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","document","documentElement","setAttribute","navigator","userAgent","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_keyboard_vue_vue_type_style_index_0_id_0c57185e_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_keyboard_vue_vue_type_style_index_0_id_0c57185e_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","Appvue_type_template_id_4758d940_render","_vm","this","_h","$createElement","_c","_self","attrs","id","_l","osc","staticClass","_v","_s","directives","rawName","expression","type","domProps","checked","Array","isArray","active","_i","on","change","$event","$$a","$$el","target","$$c","$$v","$$i","$set","concat","$$selectedVal","filter","options","selected","map","val","_value","multiple","shape","voiceCount","_b","min","max","model","callback","sliderConfig","horizontal","octave","_e","pitch","interval","size","label","scale","filterCutoff","filterResonance","filterEnvelopeAmount","verticalADSR","filterA","filterD","filterS","filterR","volumeA","volumeD","volumeS","volumeR","volume","bpm","ref","octaveStart","verticalLow","octaveEnd","verticalHigh","noteOn","onKeyboardNoteOn","noteOff","onKeyboardNoteOff","orientation","low","horizontalLow","high","horizontalHigh","lowChanged","onScrollHorizontalLowChanged","highChanged","onScrollHorizontalHighChanged","reverse","onScrollVerticalLowChanged","onScrollVerticalHighChanged","audioContext","audioCtx","viewportStart","viewportEnd","onSequencerNoteOn","onSequencerNoteOff","stop","onSequencerStop","click","togglePlaying","exportNotes","importNotes","test","staticRenderFns","knobvue_type_template_id_693f9299_scoped_true_render","width","height","viewBox","version","xmlns","pointerdown","stopPropagation","pointerDown","pointerup","pointerUp","pointermove","pointerMove","cx","cy","fill","tick","x1","y1","x2","y2","line","offset","stop-color","href","gradientTransform","knobvue_type_template_id_693f9299_scoped_true_staticRenderFns","deg2rad","deg","Math","PI","valueConverters","linear","toValue","fromValue","log","pow","knobvue_type_script_lang_js_","props","Number","default","String","validator","indexOf","tickCount","mounted","methods","e","setPointerCapture","pointerId","releasePointerCapture","hasPointerCapture","newValue","knobPosition","movementY","clamp_default","$emit","computed","angle","cos","sin","ticks","self","components_knobvue_type_script_lang_js_","component","componentNormalizer","__file","knob","keyboardvue_type_template_id_0c57185e_scoped_true_render","preserveAspectRatio","isWhiteKey","isWhiteKeyVisible","class","isKeyDown_","vector-effect","x","y","whiteKeyYPositionsAbsolute","numOctavesVisibleInViewport","whiteKeyHeights_","data-b","keyDown","keyUp","isBlackKey","isBlackKeyVisible","blackKeyYPositionsAbsolute","blackKeyHeights_","keyboardvue_type_template_id_0c57185e_scoped_true_staticRenderFns","isKeyDown","addEventListener","repeat","code","dispatchEvent","CustomEvent","detail","keysToMidiNote","KeyZ","KeyS","KeyX","KeyD","KeyC","KeyV","KeyG","KeyB","KeyH","KeyN","KeyJ","KeyM","Comma","KeyL","Period","Semicolon","Slash","KeyQ","Digit2","KeyW","Digit3","KeyE","KeyR","Digit5","KeyT","Digit6","KeyY","Digit7","KeyU","KeyI","Digit9","KeyO","Digit0","KeyP","BracketLeft","Equal","BracketRight","keyboardvue_type_script_lang_js_","numKeysVisibleInViewport","keyOffset","whiteKeyYPositions","curPos","v","posis","_loop","toConsumableArray","blackKeyYPositions","_loop2","_this","shit","keyNumber","triggerEventEmit","note","releaseAllKeys","includes","components_keyboardvue_type_script_lang_js_","keyboard_component","keyboard","sequencervue_type_template_id_c9fb0042_scoped_true_render","preventDefault","onPointerDown","onPointerUp","onPointerMove","contextmenu","ceil","numBarsVisibleInViewport","floor","noteWidth","noteHeight","transform","barWidth","duration","stroke-width","_k","keyCode","button","removeNote","!pointermove","onResizeNoteStart","onResizeNoteEnd","onResizeNote","selection","left","bottom","playheadPosition","stroke","sequencervue_type_template_id_c9fb0042_scoped_true_staticRenderFns","sequencervue_type_script_lang_js_SelectionRect","SelectionRect","classCallCheck","start","end","right","top","sr","BUTTONS","LEFT_MOUSE","RIGHT_MOUSE","generateNoteId","lastUpdate","sequenceStartTime","sequencervue_type_script_lang_js_","AudioContext","required","notes","sequencePosition","sequenceCurrentLoop","playing","lookahead","notesInHand","selecting","previewNote","lastTouchedNote","totalBars","secondsPerSixteenthNote","secondsPerBar","sequenceDuration","$nextTick","parseInt","getComputedStyle","$el","onKeyDown","update_","_this2","upcomingEvents","getUpcomingEvents","forEach","noteStartOffset","noteOnTime","onTriggerCount","whenTime","off","noteEndOffset","noteOffTime","offTriggerCount","dt","currentTime","requestAnimationFrame","placeNote","bonus","newNote","fineX","fineY","index","timeInSequence","_this3","getEventsInInterval","startTime","endTime","loopCompensation","arguments","undefined","overshoot","_upcomingEvents$on","_upcomingEvents$on2","_upcomingEvents$off","_upcomingEvents$off2","eventsAtEnd","eventsAtStart","_upcomingEvents$on3","_upcomingEvents$off3","events","play","resume","_this4","ctrlKey","_this$coordsToNote","coordsToNote","offsetX","offsetY","xFine","yFine","shiftKey","selectedNotes","selectedNote","objectSpread","_this$notesInHand","emitPreviewOn","_this$coordsToNote2","deselectAllNotes","_this5","_this$coordsToNote3","emitPreviewOff","_this6","movementX","round","oldPitch","_this$coordsToNote4","buttons","_this7","Delete","KeyA","moveX","pixelsPerBar","pixelsPerOctave","pixelsPer16th","pixelsPerNote","xFineOut","yFineOut","xOut","yOut","importedNotes","_this8","components_sequencervue_type_script_lang_js_","sequencer_component","sequencer","zoom_scrollbarvue_type_template_id_46013b70_scoped_true_render","MODES","move","style","zoom_scrollbarvue_type_template_id_46013b70_scoped_true_staticRenderFns","none","resizeStart","resizeEnd","zoom_scrollbarvue_type_script_lang_js_","Boolean","pointerStartPosition_","$refs","clientX","handle","offsetLeft","offsetWidth","clientY","offsetTop","offsetHeight","_MODES$move$MODES$res","startPosInPixels","bla","bla2","newLow","newHigh","newVal","minDistance","scrollbarContainer","handleStyle","pos","vertical","components_zoom_scrollbarvue_type_script_lang_js_","zoom_scrollbar_component","zoom_scrollbar","common","tooltip","slider_config","direction","tooltip-dir","Observable","lookup","createClass","identifier","findIndex","cb","eventData","propName","defaultValue","staticLookup","constructor","set","ADSR","amplitude","ctx","constantSource","createConstantSource","attack","decay","sustain","release","tension","connect","cancelScheduledValues","setValueAtTime","setTargetAtTime","cancelAndHoldAtTime","midiNoteToFrequency","midiNoteFrequencies","midiNoteNumber","SHAPES","sine","square","sawtooth","triangle","Voice","possibleConstructorReturn","getPrototypeOf","osc1Nodes","osc1voices","createOscillator","osc1shape","osc2Nodes","osc2active","osc2voices","osc2shape","biquadFilter","createBiquadFilter","osc1gainNode","createGain","osc2gainNode","osc1volumeADSR","osc1volume","volumeAttack","volumeDecay","volumeSustain","volumeRelease","osc2volumeADSR","osc2volume","filterADSR","filterAttack","filterDecay","filterSustain","filterRelease","Q","gain","frequency","node","disconnect","midiNote","oct","osc1octave","detune","osc1detune","osc1pitch","freq","evenOdd","osc2octave","osc2detune","osc2pitch","setTimeout","createObservableMember","a","createElement","url","saveJSONtoFile","obj","filename","blob","Blob","JSON","stringify","URL","revokeObjectURL","createObjectURL","download","fileSelect","importFile","_callee","file","regeneratorRuntime","wrap","_context","prev","next","abrupt","Promise","resolve","reject","fileReader","FileReader","parse","File","readAsText","Error","importJSONfromFile","_importJSONfromFile","_callee3","_context3","oninput","asyncToGenerator","mark","_callee2","_context2","files","sent","t0","accept","voices","keyboardTimeouts","Appvue_type_script_lang_js_","components","vueSlider","dist_default","vueKeyboard","vueSequencer","zoomScrollbar","oscillators","mainGainNode","osc1active","watch","oldValue","destination","link","sourceField","cls","destinationField","transformFunction","$watch","immediate","voice_Voice","_ref","_ref2","_ref3","delay","timeout","_ref4","stopAllNotes","clearTimeout","values","voiceArray","voice","exportedNotes","then","json","now","cs","dummy","createAnalyser","src_Appvue_type_script_lang_js_","App_component","App","Vue","config","productionTip","render","h","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_sequencer_vue_vue_type_style_index_0_id_c9fb0042_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_sequencer_vue_vue_type_style_index_0_id_c9fb0042_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_knob_vue_vue_type_style_index_0_id_693f9299_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_knob_vue_vue_type_style_index_0_id_693f9299_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_zoom_scrollbar_vue_vue_type_style_index_0_id_46013b70_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_lib_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_zoom_scrollbar_vue_vue_type_style_index_0_id_46013b70_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/app.669c7630.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/WebAudioSynthesizer/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","document.documentElement.setAttribute(\"data-browser\", navigator.userAgent);","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./keyboard.vue?vue&type=style&index=0&id=0c57185e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./keyboard.vue?vue&type=style&index=0&id=0c57185e&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_vm._l((_vm.oscillators),function(osc,i){return _c('fieldset',{key:'oscillator'+i,staticClass:\"oscillator-container\"},[_c('legend',[_vm._v(\"OSC \"+_vm._s(i + 1))]),_c('label',[_vm._v(\"\\n      Active\\n      \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(osc.active),expression:\"osc.active\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(osc.active)?_vm._i(osc.active,null)>-1:(osc.active)},on:{\"change\":function($event){var $$a=osc.active,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.$set(osc, \"active\", $$a.concat([$$v])))}else{$$i>-1&&(_vm.$set(osc, \"active\", $$a.slice(0,$$i).concat($$a.slice($$i+1))))}}else{_vm.$set(osc, \"active\", $$c)}}}})]),_c('label',[_vm._v(\"\\n      Shape\\n      \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(osc.shape),expression:\"osc.shape\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(osc, \"shape\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.SHAPES),function(shape){return _c('option',{key:shape,domProps:{\"value\":shape}},[_vm._v(\"\\n          \"+_vm._s(shape)+\"\\n        \")])}))]),_c('label',[_vm._v(\"\\n      Voices\\n      \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(osc.voices),expression:\"osc.voices\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(osc, \"voices\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((8),function(voiceCount){return _c('option',{key:'voiceSelect'+voiceCount,domProps:{\"value\":voiceCount}},[_vm._v(\"\\n          \"+_vm._s(voiceCount)+\"\\n        \")])}))]),_c('label',[_vm._v(\"\\n      Detune\\n      \"),_c('vue-slider',_vm._b({attrs:{\"min\":0,\"max\":1200},model:{value:(osc.detune),callback:function ($$v) {_vm.$set(osc, \"detune\", $$v)},expression:\"osc.detune\"}},'vue-slider',_vm.sliderConfig.horizontal,false))],1),_c('label',[_vm._v(\"\\n      Octave\\n      \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(osc.octave),expression:\"osc.octave\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(osc, \"octave\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((5),function(octave){return _c('option',{key:'octaveSelect'+octave,domProps:{\"value\":octave - 3}},[(octave - 3 > 0)?[_vm._v(\"+\")]:_vm._e(),_vm._v(\"\\n          \"+_vm._s(octave - 3)+\"\\n        \")],2)}))]),_c('label',[_vm._v(\"\\n      Pitch\\n      \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(osc.pitch),expression:\"osc.pitch\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(osc, \"pitch\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((25),function(pitch){return _c('option',{key:'pitchSelect'+pitch,domProps:{\"value\":pitch - 13}},[(pitch - 13 > 0)?[_vm._v(\"+\")]:_vm._e(),_vm._v(\"\\n          \"+_vm._s(pitch - 13)+\"\\n        \")],2)}))]),_c('label',[_vm._v(\"\\n      Volume\\n      \"),_c('vue-slider',_vm._b({attrs:{\"interval\":0.001,\"min\":0,\"max\":1},model:{value:(osc.volume),callback:function ($$v) {_vm.$set(osc, \"volume\", $$v)},expression:\"osc.volume\"}},'vue-slider',_vm.sliderConfig.horizontal,false))],1)])}),_c('fieldset',[_c('legend',[_vm._v(\"Filter\")]),_c('div',{staticClass:\"filter-envelope-container\"},[_c('knob',{attrs:{\"size\":75,\"label\":\"Cutoff\",\"min\":5,\"max\":22000,\"scale\":\"log\"},model:{value:(_vm.filterCutoff),callback:function ($$v) {_vm.filterCutoff=$$v},expression:\"filterCutoff\"}}),_c('knob',{attrs:{\"size\":75,\"label\":\"Resonance\",\"min\":0,\"max\":10},model:{value:(_vm.filterResonance),callback:function ($$v) {_vm.filterResonance=$$v},expression:\"filterResonance\"}}),_c('vue-slider',_vm._b({attrs:{\"min\":0,\"max\":1,\"interval\":0.01},model:{value:(_vm.filterEnvelopeAmount),callback:function ($$v) {_vm.filterEnvelopeAmount=$$v},expression:\"filterEnvelopeAmount\"}},'vue-slider',_vm.sliderConfig.verticalADSR,false)),_c('vue-slider',_vm._b({attrs:{\"min\":0,\"max\":1,\"interval\":0.01},model:{value:(_vm.filterA),callback:function ($$v) {_vm.filterA=$$v},expression:\"filterA\"}},'vue-slider',_vm.sliderConfig.verticalADSR,false)),_c('vue-slider',_vm._b({attrs:{\"min\":0,\"max\":1,\"interval\":0.01},model:{value:(_vm.filterD),callback:function ($$v) {_vm.filterD=$$v},expression:\"filterD\"}},'vue-slider',_vm.sliderConfig.verticalADSR,false)),_c('vue-slider',_vm._b({attrs:{\"min\":0,\"max\":1,\"interval\":0.01},model:{value:(_vm.filterS),callback:function ($$v) {_vm.filterS=$$v},expression:\"filterS\"}},'vue-slider',_vm.sliderConfig.verticalADSR,false)),_c('vue-slider',_vm._b({attrs:{\"min\":0.01,\"max\":1,\"interval\":0.01},model:{value:(_vm.filterR),callback:function ($$v) {_vm.filterR=$$v},expression:\"filterR\"}},'vue-slider',_vm.sliderConfig.verticalADSR,false)),_c('span',[_vm._v(\"Env\")]),_c('span',[_vm._v(\"A\")]),_c('span',[_vm._v(\"D\")]),_c('span',[_vm._v(\"S\")]),_c('span',[_vm._v(\"R\")])],1)]),_c('fieldset',[_c('legend',[_vm._v(\"Amplitude\")]),_c('div',{staticClass:\"ASDR-container\"},[_c('vue-slider',_vm._b({attrs:{\"min\":0,\"max\":1,\"interval\":0.01},model:{value:(_vm.volumeA),callback:function ($$v) {_vm.volumeA=$$v},expression:\"volumeA\"}},'vue-slider',_vm.sliderConfig.verticalADSR,false)),_c('vue-slider',_vm._b({attrs:{\"min\":0,\"max\":1,\"interval\":0.01},model:{value:(_vm.volumeD),callback:function ($$v) {_vm.volumeD=$$v},expression:\"volumeD\"}},'vue-slider',_vm.sliderConfig.verticalADSR,false)),_c('vue-slider',_vm._b({attrs:{\"min\":0,\"max\":1,\"interval\":0.01},model:{value:(_vm.volumeS),callback:function ($$v) {_vm.volumeS=$$v},expression:\"volumeS\"}},'vue-slider',_vm.sliderConfig.verticalADSR,false)),_c('vue-slider',_vm._b({attrs:{\"min\":0.01,\"max\":1,\"interval\":0.01},model:{value:(_vm.volumeR),callback:function ($$v) {_vm.volumeR=$$v},expression:\"volumeR\"}},'vue-slider',_vm.sliderConfig.verticalADSR,false)),_c('span',[_vm._v(\"A\")]),_c('span',[_vm._v(\"D\")]),_c('span',[_vm._v(\"S\")]),_c('span',[_vm._v(\"R\")])],1)]),_c('div',[_c('vue-slider',_vm._b({attrs:{\"min\":0,\"max\":0.5,\"interval\":0.01},model:{value:(_vm.volume),callback:function ($$v) {_vm.volume=$$v},expression:\"volume\"}},'vue-slider',_vm.sliderConfig.horizontal,false)),_vm._v(\"\\n    Volume: \"+_vm._s(_vm.volume)+\"\\n    \"),_c('vue-slider',_vm._b({attrs:{\"min\":80,\"max\":200},model:{value:(_vm.bpm),callback:function ($$v) {_vm.bpm=$$v},expression:\"bpm\"}},'vue-slider',_vm.sliderConfig.horizontal,false)),_vm._v(\"\\n    BPM: \"+_vm._s(_vm.bpm)+\"\\n  \")],1),_c('div',{staticClass:\"kb-and-sequencer\"},[_c('vue-keyboard',{ref:\"keyboard\",attrs:{\"octaveStart\":_vm.verticalLow,\"octaveEnd\":_vm.verticalHigh},on:{\"noteOn\":_vm.onKeyboardNoteOn,\"noteOff\":_vm.onKeyboardNoteOff}}),_c('zoom-scrollbar',{attrs:{\"orientation\":\"horizontal\",\"min\":0,\"max\":4,\"low\":_vm.horizontalLow,\"high\":_vm.horizontalHigh},on:{\"lowChanged\":_vm.onScrollHorizontalLowChanged,\"highChanged\":_vm.onScrollHorizontalHighChanged}}),_c('zoom-scrollbar',{attrs:{\"orientation\":\"vertical\",\"min\":2,\"max\":8,\"low\":_vm.verticalLow,\"high\":_vm.verticalHigh,\"reverse\":true},on:{\"lowChanged\":_vm.onScrollVerticalLowChanged,\"highChanged\":_vm.onScrollVerticalHighChanged}}),_c('vue-sequencer',{ref:\"sequencer\",attrs:{\"audioContext\":_vm.audioCtx,\"bpm\":_vm.bpm,\"viewportStart\":_vm.horizontalLow,\"viewportEnd\":_vm.horizontalHigh,\"octaveStart\":_vm.verticalLow,\"octaveEnd\":_vm.verticalHigh},on:{\"noteOn\":_vm.onSequencerNoteOn,\"noteOff\":_vm.onSequencerNoteOff,\"stop\":_vm.onSequencerStop}})],1),_c('input',{attrs:{\"type\":\"button\",\"value\":\"Play/Pause\"},on:{\"click\":_vm.togglePlaying}}),_c('input',{attrs:{\"type\":\"button\",\"value\":\"Export\"},on:{\"click\":_vm.exportNotes}}),_c('input',{attrs:{\"type\":\"button\",\"value\":\"Import\"},on:{\"click\":_vm.importNotes}}),_c('input',{attrs:{\"type\":\"button\",\"value\":\"Test\"},on:{\"click\":_vm.test}})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('svg',{attrs:{\"width\":_vm.size,\"height\":_vm.size,\"viewBox\":\"0 0 100 100\",\"version\":\"1.1\",\"xmlns\":\"http://www.w3.org/2000/svg\"}},[_c('g',{on:{\"pointerdown\":function($event){$event.stopPropagation();return _vm.pointerDown($event)},\"pointerup\":function($event){$event.stopPropagation();return _vm.pointerUp($event)},\"pointermove\":function($event){$event.stopPropagation();return _vm.pointerMove($event)}}},[_c('circle',{attrs:{\"cx\":\"50\",\"cy\":\"50\",\"r\":\"40\",\"fill\":\"url(#gradient)\"}}),_c('circle',{attrs:{\"cx\":\"50\",\"cy\":\"50\",\"r\":\"35\",\"fill\":\"url(#gradientReversed)\"}})]),_c('g',_vm._l((_vm.ticks),function(tick,i){return _c('line',{key:i,staticClass:\"tickLine\",attrs:{\"x1\":tick.x1,\"y1\":tick.y1,\"x2\":tick.x2,\"y2\":tick.y2}})})),_c('line',{attrs:{\"x1\":_vm.line.x1,\"y1\":_vm.line.y1,\"x2\":_vm.line.x2,\"y2\":_vm.line.y2}}),_c('defs',[_c('linearGradient',{attrs:{\"id\":\"gradient\",\"x1\":\"0%\",\"y1\":\"0%\",\"x2\":\"100%\",\"y2\":\"100%\"}},[_c('stop',{attrs:{\"offset\":\"0%\",\"stop-color\":\"#447799\"}}),_c('stop',{attrs:{\"offset\":\"50%\",\"stop-color\":\"#224488\"}}),_c('stop',{attrs:{\"offset\":\"100%\",\"stop-color\":\"#112266\"}})],1),_c('linearGradient',{attrs:{\"id\":\"gradientReversed\",\"href\":\"#gradient\",\"gradientTransform\":\"rotate(180, 0.5, 0.5)\"}})],1)]),_c('label',[_vm._v(_vm._s(_vm.label))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"container\">\r\n    <svg :width=\"size\" :height=\"size\" viewBox=\"0 0 100 100\"\r\n          version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\r\n      <g @pointerdown.stop=\"pointerDown\"\r\n         @pointerup.stop=\"pointerUp\"\r\n         @pointermove.stop=\"pointerMove\">\r\n        <circle cx=\"50\" cy=\"50\" r=\"40\" fill=\"url(#gradient)\" />\r\n        <circle cx=\"50\" cy=\"50\" r=\"35\" fill=\"url(#gradientReversed)\" />\r\n      </g>\r\n      <g>\r\n        <line v-for=\"(tick, i) in ticks\" :key=\"i\" class=\"tickLine\"\r\n              :x1=\"tick.x1\" :y1=\"tick.y1\"\r\n              :x2=\"tick.x2\" :y2=\"tick.y2\" />\r\n      </g>\r\n      <line :x1=\"line.x1\" :y1=\"line.y1\"\r\n            :x2=\"line.x2\" :y2=\"line.y2\" />\r\n\r\n      <defs>\r\n        <linearGradient id=\"gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"100%\">\r\n          <stop offset=\"0%\" stop-color=\"#447799\" />\r\n          <stop offset=\"50%\" stop-color=\"#224488\" />\r\n          <stop offset=\"100%\" stop-color=\"#112266\" />\r\n        </linearGradient>\r\n        <linearGradient id=\"gradientReversed\" href=\"#gradient\"\r\n                        gradientTransform=\"rotate(180, 0.5, 0.5)\"/>\r\n      </defs>\r\n    </svg>\r\n    <label>{{ label }}</label>\r\n  </div>\r\n</template>\r\n<script>\r\nimport clamp from 'clamp'\r\n\r\nconst deg2rad = deg => deg / 360 * Math.PI * 2\r\nconst valueConverters = {\r\n  linear: {\r\n    toValue: (p, min, max) => min + (max - min) * p,\r\n    fromValue: (value, min, max) => (value - min) / (max - min),\r\n  },\r\n  log: {\r\n    toValue: (p, min, max) => Math.pow(max - min - 1, p) + min - 1,\r\n    fromValue: (value, min, max) => Math.log(value - min + 1) / Math.log(max - min + 1),\r\n  },\r\n}\r\n\r\nexport default {\r\n  name: 'knob',\r\n  props: {\r\n    size: {\r\n      type: Number,\r\n      default: 50,\r\n    },\r\n    min: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    max: {\r\n      type: Number,\r\n      default: 100,\r\n    },\r\n    value: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    label: {\r\n      type: String,\r\n      default: '',\r\n    },\r\n    scale: {\r\n      type: String,\r\n      default: 'linear',\r\n      validator: value => ['linear', 'log'].indexOf(value) !== -1\r\n    },\r\n    tickCount: {\r\n      type: Number,\r\n      default: 11,\r\n    },\r\n  },\r\n  data: () => ({\r\n  }),\r\n  mounted () {\r\n  },\r\n  methods: {\r\n    pointerDown (e) {\r\n      e.target.setPointerCapture(e.pointerId)\r\n    },\r\n    pointerUp (e) {\r\n      e.target.releasePointerCapture(e.pointerId)\r\n    },\r\n    pointerMove (e) {\r\n      if (e.target.hasPointerCapture(e.pointerId)) {\r\n        let newValue = valueConverters[this.scale].toValue(\r\n          this.knobPosition - e.movementY * 0.005, this.min, this.max)\r\n        newValue = clamp(newValue, this.min, this.max)\r\n        this.$emit('input', newValue)\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    line () {\r\n      const angle = deg2rad(180 + 45 + (this.knobPosition * 270) - 90)\r\n      return {\r\n        x1: 50 + Math.cos(angle) * 30,\r\n        y1: 50 + Math.sin(angle) * 30,\r\n        x2: 50 + Math.cos(angle) * 35,\r\n        y2: 50 + Math.sin(angle) * 35,\r\n      }\r\n    },\r\n    ticks () {\r\n      const ticks = []\r\n      for (let i = 0; i < this.tickCount; i++) {\r\n        const p = i / (this.tickCount - 1)\r\n        const angle = deg2rad(180 + 45 + (p * 270) - 90)\r\n        ticks.push({\r\n          x1: 50 + Math.cos(angle) * 45,\r\n          y1: 50 + Math.sin(angle) * 45,\r\n          x2: 50 + Math.cos(angle) * 50,\r\n          y2: 50 + Math.sin(angle) * 50,\r\n        })\r\n      }\r\n      return ticks\r\n    },\r\n    knobPosition: self => valueConverters[self.scale].fromValue(self.value, self.min, self.max)\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.container {\r\n  display: inline-block;\r\n  margin: 3px;\r\n}\r\nsvg {\r\n  user-select: none;\r\n  overflow: visible;\r\n  line {\r\n    stroke:white;\r\n    stroke-width: 5;\r\n    pointer-events: none;\r\n    stroke-linecap: round;\r\n  }\r\n  .tickLine {\r\n    stroke:black;\r\n    stroke-width: 3;\r\n  }\r\n}\r\nlabel {\r\n  display: block;\r\n  margin: auto;\r\n  text-align: center;\r\n  position: relative;\r\n  top: -5px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./knob.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./knob.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./knob.vue?vue&type=template&id=693f9299&scoped=true&\"\nimport script from \"./knob.vue?vue&type=script&lang=js&\"\nexport * from \"./knob.vue?vue&type=script&lang=js&\"\nimport style0 from \"./knob.vue?vue&type=style&index=0&id=693f9299&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"693f9299\",\n  null\n  \n)\n\ncomponent.options.__file = \"knob.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"viewBox\":\"0 0 100 100\",\"preserveAspectRatio\":\"none\"}},[_vm._l((96),function(i){return (_vm.isWhiteKey(i) && _vm.isWhiteKeyVisible(i))?_c('rect',{key:'whiteKey'+i,class:['white-key', _vm.isKeyDown_[i-1] ? 'white-key-down' : ''],attrs:{\"vector-effect\":\"non-scaling-stroke\",\"x\":\"0\",\"width\":\"100\",\"y\":100 - _vm.whiteKeyYPositionsAbsolute[i-1] + _vm.octaveStart * (100 / _vm.numOctavesVisibleInViewport),\"height\":_vm.whiteKeyHeights_[(i-1)%12] / _vm.numOctavesVisibleInViewport,\"data-b\":(\"i: \" + i + \", \")},on:{\"pointerdown\":function($event){_vm.keyDown(i-1, true, $event)},\"pointerup\":function($event){_vm.keyUp(i-1, true, $event)}}}):_vm._e()}),_vm._l((96),function(i){return (_vm.isBlackKey(i) && _vm.isBlackKeyVisible(i))?_c('rect',{key:'blackKey'+i,class:['black-key', _vm.isKeyDown_[i-1] ? 'black-key-down' : ''],attrs:{\"x\":\"0\",\"width\":\"63\",\"y\":100 - _vm.blackKeyYPositionsAbsolute[i-1] + _vm.octaveStart * (100 / _vm.numOctavesVisibleInViewport),\"height\":_vm.blackKeyHeights_[(i-1)%12] / _vm.numOctavesVisibleInViewport,\"data-b\":(\"i: \" + i + \", \")},on:{\"pointerdown\":function($event){_vm.keyDown(i-1, true, $event)},\"pointerup\":function($event){_vm.keyUp(i-1, true, $event)}}}):_vm._e()})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const isKeyDown = {};\r\n\r\nwindow.addEventListener('keydown', e => {\r\n  if(!e.repeat) {\r\n    if(!isKeyDown[e.code]) {\r\n      window.dispatchEvent(new CustomEvent('key-event-down-norepeat', { detail: e }));\r\n    }\r\n    isKeyDown[e.code] = true;\r\n  }\r\n});\r\n\r\nwindow.addEventListener('keyup', e => {\r\n  if(isKeyDown[e.code]) {\r\n    window.dispatchEvent(new CustomEvent('key-event-up', { detail: e }));\r\n  }\r\n  isKeyDown[e.code] = false;\r\n});\r\n","<template>\r\n  <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\">\r\n        <rect v-for=\"i in 96\" v-if=\"isWhiteKey(i) && isWhiteKeyVisible(i)\" :key=\"'whiteKey'+i\"\r\n            :class=\"['white-key', isKeyDown_[i-1] ? 'white-key-down' : '']\" vector-effect=\"non-scaling-stroke\"\r\n            x=\"0\" width=\"100\"\r\n            :y=\"100 - whiteKeyYPositionsAbsolute[i-1] + octaveStart * (100 / numOctavesVisibleInViewport)\"\r\n            :height=\"whiteKeyHeights_[(i-1)%12] / numOctavesVisibleInViewport\"\r\n            :data-b=\"`i: ${i}, `\"\r\n            @pointerdown=\"keyDown(i-1, true, $event)\"\r\n            @pointerup=\"keyUp(i-1, true, $event)\" />\r\n      <rect v-for=\"i in 96\" v-if=\"isBlackKey(i) && isBlackKeyVisible(i)\" :key=\"'blackKey'+i\"\r\n            x=\"0\" width=\"63\"\r\n            :y=\"100 - blackKeyYPositionsAbsolute[i-1] + octaveStart * (100 / numOctavesVisibleInViewport)\"\r\n            :height=\"blackKeyHeights_[(i-1)%12] / numOctavesVisibleInViewport\"\r\n            :class=\"['black-key', isKeyDown_[i-1] ? 'black-key-down' : '']\"\r\n            :data-b=\"`i: ${i}, `\"\r\n            @pointerdown=\"keyDown(i-1, true, $event)\"\r\n            @pointerup=\"keyUp(i-1, true, $event)\" />\r\n  </svg>\r\n</template>\r\n<script>\r\nimport '../key-events.js'\r\nimport '../browser-check.js'\r\n\r\nlet keysToMidiNote = {\r\n  \"KeyZ\": 36,\r\n  \"KeyS\": 37,\r\n  \"KeyX\": 38,\r\n  \"KeyD\": 39,\r\n  \"KeyC\": 40,\r\n  \"KeyV\": 41,\r\n  \"KeyG\": 42,\r\n  \"KeyB\": 43,\r\n  \"KeyH\": 44,\r\n  \"KeyN\": 45,\r\n  \"KeyJ\": 46,\r\n  \"KeyM\": 47,\r\n  \"Comma\": 48,\r\n  \"KeyL\": 49,\r\n  \"Period\": 50,\r\n  \"Semicolon\": 51,\r\n  \"Slash\": 52,\r\n  \"KeyQ\": 48,\r\n  \"Digit2\": 49,\r\n  \"KeyW\": 50,\r\n  \"Digit3\": 51,\r\n  \"KeyE\": 52,\r\n  \"KeyR\": 53,\r\n  \"Digit5\": 54,\r\n  \"KeyT\": 55,\r\n  \"Digit6\": 56,\r\n  \"KeyY\": 57,\r\n  \"Digit7\": 58,\r\n  \"KeyU\": 59,\r\n  \"KeyI\": 60,\r\n  \"Digit9\": 61,\r\n  \"KeyO\": 62,\r\n  \"Digit0\": 63,\r\n  \"KeyP\": 64,\r\n  \"BracketLeft\": 65,\r\n  \"Equal\": 66,\r\n  \"BracketRight\": 67,\r\n};\r\n\r\nexport default {\r\n  name: 'VueKeyboard',\r\n  props: {\r\n    octaveStart: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    octaveEnd: {\r\n      type: Number,\r\n      default: 2,\r\n    },\r\n  },\r\n  data: () => ({\r\n    isKeyDown_: {},\r\n    whiteKeyHeights_: [12.285, 0, 17.285, 0, 12.1, 12.285, 0, 16.285, 0, 16.285, 0, 13.475],\r\n    blackKeyHeights_: Array(12).fill(100/12),\r\n  }),\r\n  computed: {\r\n    numOctavesVisibleInViewport: self => (self.octaveEnd - self.octaveStart),\r\n    numKeysVisibleInViewport: self => self.numOctavesVisibleInViewport * 12,\r\n    keyOffset: self => (self.octaveStart % 1) * 12,\r\n    whiteKeyYPositions: self => {\r\n      let curPos = 0;\r\n      return self.whiteKeyHeights_.map(v => {\r\n        curPos += v;\r\n        return curPos;\r\n      });\r\n    },\r\n    whiteKeyYPositionsAbsolute: self => {\r\n      let posis = [];\r\n      for(let i = 0; i < 8; i++) {\r\n        posis.push(...self.whiteKeyYPositions.map(v => v / self.numOctavesVisibleInViewport + i * (100 / self.numOctavesVisibleInViewport)));\r\n      }\r\n      return posis;\r\n    },\r\n    blackKeyYPositions: self => {\r\n      let curPos = 0;\r\n      return self.blackKeyHeights_.map(v => {\r\n        curPos += v;\r\n        return curPos;\r\n      });\r\n    },\r\n    blackKeyYPositionsAbsolute: self => {\r\n      let posis = [];\r\n      for(let i = 0; i < 8; i++) {\r\n        posis.push(...self.blackKeyYPositions.map(v => v / self.numOctavesVisibleInViewport + i * (100 / self.numOctavesVisibleInViewport)));\r\n      }\r\n      return posis;\r\n    },\r\n  },\r\n  mounted() {\r\n    window.shit = this;\r\n    window.addEventListener('key-event-down-norepeat', e => {\r\n      e = e.detail;\r\n      if(e.code in keysToMidiNote) {\r\n        const note = {\r\n          id: 'kb' + keysToMidiNote[e.code],\r\n          pitch: keysToMidiNote[e.code],\r\n        };\r\n        // this.$emit('noteOn', note);\r\n        this.keyDown(keysToMidiNote[e.code], true);\r\n      }\r\n    });\r\n    window.addEventListener('key-event-up', e => {\r\n      e = e.detail;\r\n      const note = {\r\n        id: 'kb' + keysToMidiNote[e.code],\r\n        pitch: keysToMidiNote[e.code],\r\n      };\r\n      // this.$emit('noteOff', note);\r\n      this.keyUp(keysToMidiNote[e.code], true);\r\n    });\r\n  },\r\n  methods: {\r\n    keyDown(keyNumber, triggerEventEmit, e) {\r\n      if(e) {\r\n        e.target.setPointerCapture(e.pointerId);\r\n      }\r\n      const note = {\r\n        id: 'kb' + keyNumber,\r\n        pitch: keyNumber,\r\n      };\r\n      if(triggerEventEmit && !this.isKeyDown_[keyNumber]) {\r\n        this.$emit('noteOn', note);\r\n      }\r\n      this.$set(this.isKeyDown_, keyNumber, true);\r\n    },\r\n    keyUp(keyNumber, triggerEventEmit, e) {\r\n      if(e) {\r\n        e.target.releasePointerCapture(e.pointerId);\r\n      }\r\n      if(this.isKeyDown_[keyNumber]) {\r\n        const note = {\r\n          id: 'kb' + keyNumber,\r\n          pitch: keyNumber,\r\n        };\r\n        if(triggerEventEmit && this.isKeyDown_[keyNumber]) {\r\n          this.$emit('noteOff', note);\r\n        }\r\n        this.$set(this.isKeyDown_, keyNumber, false);\r\n      }\r\n    },\r\n    releaseAllKeys() {\r\n      for(let keyNumber in this.isKeyDown_) {\r\n        this.$set(this.isKeyDown_, keyNumber, false);\r\n      }\r\n    },\r\n    isWhiteKeyVisible(i) {\r\n      return i > this.octaveStart * 12 - 1 && i < this.octaveEnd * 12 + 2;\r\n    },\r\n    isWhiteKey(i) {\r\n      return [1,3,5,6,8,10,12].includes((i-1)%12+1);\r\n    },\r\n    isBlackKeyVisible(i) {\r\n      return i > this.octaveStart * 12 - 1 && i < this.octaveEnd * 12 + 2;\r\n    },\r\n    isBlackKey(i) {\r\n      return [2,4,7,9,11].includes((i-1)%12+1);\r\n    },\r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '../browser-check.scss';\r\n\r\nsvg {\r\n  shape-rendering: crispEdges;\r\n  @include browser(Firefox) {\r\n    shape-rendering: auto;\r\n  }\r\n}\r\n.white-key {\r\n  fill: white;\r\n  stroke: black;\r\n  stroke-width: 0.5;\r\n  &-down {\r\n    fill: #a7d4a5;\r\n  }\r\n}\r\n.black-key {\r\n  fill: black;\r\n  &-down {\r\n    fill: #5da55a;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./keyboard.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./keyboard.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./keyboard.vue?vue&type=template&id=0c57185e&scoped=true&\"\nimport script from \"./keyboard.vue?vue&type=script&lang=js&\"\nexport * from \"./keyboard.vue?vue&type=script&lang=js&\"\nimport style0 from \"./keyboard.vue?vue&type=style&index=0&id=0c57185e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0c57185e\",\n  null\n  \n)\n\ncomponent.options.__file = \"keyboard.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{attrs:{\"width\":\"100%\",\"height\":\"100%\",\"viewBox\":\"0 0 100 100\",\"preserveAspectRatio\":\"none\"},on:{\"pointerdown\":function($event){$event.preventDefault();return _vm.onPointerDown($event)},\"pointerup\":function($event){$event.preventDefault();return _vm.onPointerUp($event)},\"pointermove\":function($event){$event.preventDefault();return _vm.onPointerMove($event)},\"contextmenu\":function($event){$event.preventDefault();}}},[_vm._l((Math.ceil(_vm.numBarsVisibleInViewport * 4 + 1)),function(i){return _c('rect',{key:'bgrect' + i,class:(i-1) % 2 === Math.floor((_vm.viewportStart % 0.5) * 4) ? 'bg1' : 'bg2',attrs:{\"x\":(i-1) * _vm.noteWidth * 4 - (_vm.viewportStart % (1/4)) * _vm.noteWidth * 16,\"width\":_vm.noteWidth * 4,\"y\":\"0\",\"height\":\"100%\"}})}),_vm._l((Math.ceil(_vm.numOctavesVisibleInViewport * 12) + 13),function(i){return ([2, 4, 7, 9, 11].includes((i-1)%12))?_c('rect',{key:'whiteBlackRect' + i,staticClass:\"blackKeyGrid\",attrs:{\"x\":0,\"width\":\"100\",\"y\":100 - (i-1) * _vm.noteHeight + (_vm.octaveStart % 1) * _vm.noteHeight * 12,\"height\":_vm.noteHeight}}):_vm._e()}),_vm._l((Math.ceil(_vm.numBarsVisibleInViewport * 16 + 1)),function(x){return _c('line',{key:(\"noteLineX\" + x),staticClass:\"note-line\",attrs:{\"x1\":(x-1)*_vm.noteWidth - (_vm.viewportStart % (1 / 16)) * _vm.noteWidth * 16,\"x2\":(x-1)*_vm.noteWidth - (_vm.viewportStart % (1 / 16)) * _vm.noteWidth * 16,\"y1\":\"0\",\"y2\":\"100\",\"vector-effect\":\"non-scaling-stroke\"}})}),_vm._l((Math.ceil(_vm.numOctavesVisibleInViewport * 12 + 1)),function(y){return _c('line',{key:(\"noteLineY\" + y),staticClass:\"note-line\",attrs:{\"x1\":\"0\",\"x2\":\"100\",\"y1\":100 - (y-1)*_vm.noteHeight + (_vm.octaveStart % (1/ 12)) * _vm.noteHeight * 12,\"y2\":100 - (y-1)*_vm.noteHeight + (_vm.octaveStart % (1/ 12)) * _vm.noteHeight * 12,\"vector-effect\":\"non-scaling-stroke\"}})}),_vm._l((Math.ceil(_vm.numBarsVisibleInViewport * 4 + 1)),function(i){return _c('path',{key:'outline1' + i,staticClass:\"beat-line\",attrs:{\"d\":\"M0 0 L0 100\",\"transform\":(\"translate(\" + ((i-1)*_vm.noteWidth * 4 - (_vm.viewportStart % (1 / 4)) * _vm.noteWidth * 16) + \", 0)\"),\"vector-effect\":\"non-scaling-stroke\"}})}),_vm._l((Math.ceil(_vm.numBarsVisibleInViewport + 1)),function(x){return _c('line',{key:(\"barLineX\" + x),staticClass:\"bar-line\",attrs:{\"x1\":(x-1)*_vm.noteWidth*16 - (_vm.viewportStart % (1 / 1)) * _vm.noteWidth * 16,\"x2\":(x-1)*_vm.noteWidth*16 - (_vm.viewportStart % (1 / 1)) * _vm.noteWidth * 16,\"y1\":\"0\",\"y2\":\"100\",\"vector-effect\":\"non-scaling-stroke\"}})}),_vm._l((Math.ceil(_vm.numOctavesVisibleInViewport) + 1),function(i){return [_c('line',{key:'eToFSeparator' + i,staticClass:\"e-to-f-line\",attrs:{\"x1\":\"0\",\"x2\":\"100\",\"y1\":100 - _vm.noteHeight*5*i - (i-1) * _vm.noteHeight * 7 + (_vm.octaveStart % 1) * _vm.noteHeight * 12,\"y2\":100 - _vm.noteHeight*5*i - (i-1) * _vm.noteHeight * 7 + (_vm.octaveStart % 1) * _vm.noteHeight * 12,\"vector-effect\":\"non-scaling-stroke\"}}),_c('line',{key:'octaveSeparator' + i,staticClass:\"octave-line\",attrs:{\"x1\":\"0\",\"x2\":\"100\",\"y1\":100 - _vm.noteHeight*12*i + (_vm.octaveStart % 1) * _vm.noteHeight * 12,\"y2\":100 - _vm.noteHeight*12*i + (_vm.octaveStart % 1) * _vm.noteHeight * 12,\"vector-effect\":\"non-scaling-stroke\"}})]}),_vm._l((_vm.notes),function(note,i){return _c('g',{key:(\"note-\" + i)},[_c('rect',{class:['note', 'note-placed', note.selected ? 'note-selected' : ''],attrs:{\"width\":_vm.barWidth * note.duration,\"height\":_vm.noteHeight,\"x\":note.x * _vm.noteWidth - _vm.viewportStart * _vm.noteWidth * 16,\"y\":100 - (note.y+1) * _vm.noteHeight + _vm.octaveStart * _vm.noteHeight * 12,\"stroke-width\":\"0.1\"},on:{\"pointerdown\":[function($event){$event.stopPropagation();_vm.onPointerDown($event, note)},function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"right\",39,$event.key,[\"Right\",\"ArrowRight\"])){ return null; }$event.stopPropagation();if('button' in $event && $event.button !== 2){ return null; }_vm.removeNote(note)}],\"pointerup\":function($event){$event.stopPropagation();_vm.onPointerUp($event, note)},\"!pointermove\":function($event){_vm.onPointerMove($event, note)}}}),_c('rect',{staticClass:\"note-resize-handle\",attrs:{\"width\":1,\"height\":_vm.noteHeight,\"x\":note.x * _vm.noteWidth - _vm.viewportStart * _vm.noteWidth * 16 + _vm.barWidth * note.duration - 0.75,\"y\":100 - (note.y+1) * _vm.noteHeight + _vm.octaveStart * _vm.noteHeight * 12},on:{\"pointerdown\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }$event.stopPropagation();_vm.onResizeNoteStart($event, note)},\"pointerup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }$event.stopPropagation();_vm.onResizeNoteEnd($event, note)},\"pointermove\":function($event){$event.stopPropagation();_vm.onResizeNote($event, note)}}})])}),(_vm.selecting)?_c('rect',{staticClass:\"selection-rectangle\",attrs:{\"x\":((_vm.selection.left - _vm.viewportStart * 16) / 16 * 100) / _vm.numBarsVisibleInViewport,\"y\":100 - ((_vm.selection.bottom - _vm.octaveStart * 12) / 12 * 100) / _vm.numOctavesVisibleInViewport,\"width\":_vm.selection.width / 16 * 100 / _vm.numBarsVisibleInViewport,\"height\":_vm.selection.height / 12 * 100 / _vm.numOctavesVisibleInViewport,\"vector-effect\":\"non-scaling-stroke\"}}):_vm._e(),(_vm.playing)?_c('line',{attrs:{\"x1\":_vm.playheadPosition * 100,\"y1\":\"0\",\"x2\":_vm.playheadPosition * 100,\"y2\":\"100\",\"stroke-width\":\"0.2\",\"stroke\":\"yellow\"}}):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- Grid -->\r\n  <svg width=\"100%\" height=\"100%\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"none\"\r\n       @pointerdown.prevent=\"onPointerDown\"\r\n       @pointerup.prevent=\"onPointerUp\"\r\n       @pointermove.prevent=\"onPointerMove\"\r\n       @contextmenu.prevent>\r\n    <!-- Background -->\r\n    <rect v-for=\"i in Math.ceil(numBarsVisibleInViewport * 4 + 1)\" :key=\"'bgrect' + i\"\r\n          :x=\"(i-1) * noteWidth * 4 - (viewportStart % (1/4)) * noteWidth * 16\"\r\n          :width=\"noteWidth * 4\"\r\n          y=\"0\" height=\"100%\"\r\n          :class=\"(i-1) % 2 === Math.floor((viewportStart % 0.5) * 4) ? 'bg1' : 'bg2'\" />\r\n    <!-- White/Black horizontal lines for black keys -->\r\n    <!-- TODO: This could be done better, was done lazily -->\r\n    <rect v-for=\"i in Math.ceil(numOctavesVisibleInViewport * 12) + 13\" :key=\"'whiteBlackRect' + i\"\r\n          :x=\"0\" width=\"100\"\r\n          :y=\"100 - (i-1) * noteHeight + (octaveStart % 1) * noteHeight * 12\"\r\n          :height=\"noteHeight\"\r\n          class=\"blackKeyGrid\"\r\n          v-if=\"[2, 4, 7, 9, 11].includes((i-1)%12)\" />\r\n    <!-- Empty rects -->\r\n    <line v-for=\"x in Math.ceil(numBarsVisibleInViewport * 16 + 1)\" :key=\"`noteLineX${x}`\"\r\n          :x1=\"(x-1)*noteWidth - (viewportStart % (1 / 16)) * noteWidth * 16\"\r\n          :x2=\"(x-1)*noteWidth - (viewportStart % (1 / 16)) * noteWidth * 16\"\r\n          y1=\"0\" y2=\"100\"\r\n          class=\"note-line\"\r\n          vector-effect=\"non-scaling-stroke\" />\r\n    <line v-for=\"y in Math.ceil(numOctavesVisibleInViewport * 12 + 1)\" :key=\"`noteLineY${y}`\"\r\n          x1=\"0\" x2=\"100\"\r\n          :y1=\"100 - (y-1)*noteHeight + (octaveStart % (1/ 12)) * noteHeight * 12\"\r\n          :y2=\"100 - (y-1)*noteHeight + (octaveStart % (1/ 12)) * noteHeight * 12\"\r\n          class=\"note-line\"\r\n          vector-effect=\"non-scaling-stroke\" />\r\n    <!-- Lines for beats -->\r\n    <path v-for=\"i in Math.ceil(numBarsVisibleInViewport * 4 + 1)\" :key=\"'outline1' + i\"\r\n          :d=\"`M0 0 L0 100`\"\r\n          :transform=\"`translate(${(i-1)*noteWidth * 4 - (viewportStart % (1 / 4)) * noteWidth * 16}, 0)`\"\r\n          class=\"beat-line\"\r\n          vector-effect=\"non-scaling-stroke\" />\r\n    <!-- Lines for bars -->\r\n    <line v-for=\"x in Math.ceil(numBarsVisibleInViewport + 1)\" :key=\"`barLineX${x}`\"\r\n          :x1=\"(x-1)*noteWidth*16 - (viewportStart % (1 / 1)) * noteWidth * 16\"\r\n          :x2=\"(x-1)*noteWidth*16 - (viewportStart % (1 / 1)) * noteWidth * 16\"\r\n          y1=\"0\" y2=\"100\"\r\n          class=\"bar-line\"\r\n          vector-effect=\"non-scaling-stroke\" />\r\n    <template v-for=\"i in Math.ceil(numOctavesVisibleInViewport) + 1\">\r\n      <!-- E -> F separator -->\r\n      <line :key=\"'eToFSeparator' + i\"\r\n            x1=\"0\" x2=\"100\"\r\n            :y1=\"100 - noteHeight*5*i - (i-1) * noteHeight * 7 + (octaveStart % 1) * noteHeight * 12\"\r\n            :y2=\"100 - noteHeight*5*i - (i-1) * noteHeight * 7 + (octaveStart % 1) * noteHeight * 12\"\r\n            class=\"e-to-f-line\"\r\n            vector-effect=\"non-scaling-stroke\" />\r\n      <!-- Octave separator -->\r\n      <line :key=\"'octaveSeparator' + i\"\r\n            x1=\"0\" x2=\"100\"\r\n            :y1=\"100 - noteHeight*12*i + (octaveStart % 1) * noteHeight * 12\"\r\n            :y2=\"100 - noteHeight*12*i + (octaveStart % 1) * noteHeight * 12\"\r\n            class=\"octave-line\"\r\n            vector-effect=\"non-scaling-stroke\" />\r\n    </template>\r\n    <!-- Placed notes -->\r\n    <g v-for=\"(note, i) in notes\" :key=\"`note-${i}`\">\r\n      <rect :width=\"barWidth * note.duration\" :height=\"noteHeight\"\r\n            :x=\"note.x * noteWidth - viewportStart * noteWidth * 16\"\r\n            :y=\"100 - (note.y+1) * noteHeight + octaveStart * noteHeight * 12\"\r\n            stroke-width=\"0.1\"\r\n            :class=\"['note', 'note-placed', note.selected ? 'note-selected' : '']\"\r\n            @pointerdown.stop=\"onPointerDown($event, note)\"\r\n            @pointerup.stop=\"onPointerUp($event, note)\"\r\n            @pointermove.capture=\"onPointerMove($event, note)\"\r\n            @pointerdown.stop.right=\"removeNote(note)\" />\r\n      <!-- Note resize handle -->\r\n      <rect :width=\"1\" :height=\"noteHeight\"\r\n            :x=\"note.x * noteWidth - viewportStart * noteWidth * 16 + barWidth * note.duration - 0.75\"\r\n            :y=\"100 - (note.y+1) * noteHeight + octaveStart * noteHeight * 12\"\r\n            class=\"note-resize-handle\"\r\n            @pointerdown.left.stop=\"onResizeNoteStart($event, note)\"\r\n            @pointerup.left.stop=\"onResizeNoteEnd($event, note)\"\r\n            @pointermove.stop=\"onResizeNote($event, note)\" />\r\n    </g>\r\n    <!-- Selection rectangle -->\r\n    <rect v-if=\"selecting\"\r\n          :x=\"((selection.left - viewportStart * 16) / 16 * 100) / numBarsVisibleInViewport\"\r\n          :y=\"100 - ((selection.bottom - octaveStart * 12) / 12 * 100) / numOctavesVisibleInViewport\"\r\n          :width=\"selection.width / 16 * 100 / numBarsVisibleInViewport\"\r\n          :height=\"selection.height / 12 * 100 / numOctavesVisibleInViewport\"\r\n          vector-effect=\"non-scaling-stroke\"\r\n          class=\"selection-rectangle\" />\r\n    <!-- Playhead -->\r\n    <line v-if=\"playing\"\r\n          :x1=\"playheadPosition * 100\" y1=\"0\"\r\n          :x2=\"playheadPosition * 100\" y2=\"100\"\r\n          stroke-width=\"0.2\" stroke=\"yellow\" />\r\n  </svg>\r\n</template>\r\n<script>\r\nimport '../key-events.js'\r\nimport '../browser-check.js'\r\n\r\nclass SelectionRect {\r\n  constructor(x, y) {\r\n    this.start = { x, y };\r\n    this.end = { x, y };\r\n  }\r\n  get left() {\r\n    return Math.min(this.start.x, this.end.x);\r\n  }\r\n  get top() {\r\n    return Math.min(this.start.y, this.end.y);\r\n  }\r\n  get right() {\r\n    return Math.max(this.start.x, this.end.x);\r\n  }\r\n  get bottom() {\r\n    return Math.max(this.start.y, this.end.y);\r\n  }\r\n  get width() {\r\n    return this.right - this.left;\r\n  }\r\n  get height() {\r\n    return this.bottom - this.top;\r\n  }\r\n}\r\nwindow.sr = SelectionRect\r\n\r\nconst BUTTONS = {\r\n  LEFT_MOUSE: 0,\r\n  RIGHT_MOUSE: 2,\r\n}\r\n\r\nconst generateNoteId = (() => {\r\n  let id = 0;\r\n  return () => 'sq' + id++\r\n})();\r\n\r\nlet lastUpdate = 0;\r\nlet sequenceStartTime = 0;\r\n\r\nexport default {\r\n  name: 'VueSequencer',\r\n  props: {\r\n    audioContext: {\r\n      type: AudioContext,\r\n      required: true,\r\n    },\r\n    bpm: {\r\n      type: Number,\r\n      default: 120,\r\n      required: true,\r\n    },\r\n    viewportStart: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    viewportEnd: {\r\n      type: Number,\r\n      default: 2,\r\n    },\r\n    octaveStart: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    octaveEnd: {\r\n      type: Number,\r\n      default: 2,\r\n    },\r\n  },\r\n  data: () => ({\r\n    notes: [],\r\n    sequencePosition: 0, // In bars\r\n    sequenceCurrentLoop: 0,\r\n    playing: false,\r\n    lookahead: 0.1, // In seconds\r\n    notesInHand: [],\r\n    selection: new SelectionRect(0, 0),\r\n    selecting: false,\r\n    width: 1,\r\n    height: 1,\r\n    previewNote: null,\r\n    lastTouchedNote: {\r\n      duration: 1 / 16 // In bars\r\n    }\r\n  }),\r\n  computed: {\r\n    // Number between 0 and 1, representing where in the viewport the playhead is\r\n    playheadPosition: self => (self.sequencePosition / self.totalBars - self.viewportStart / self.totalBars) / self.numBarsVisibleInViewport * self.totalBars,\r\n    secondsPerSixteenthNote: self => 60 / self.bpm / 4,\r\n    secondsPerBar: self => self.secondsPerSixteenthNote * 16,\r\n    sequenceDuration: self => self.secondsPerBar * self.totalBars, // In seconds\r\n    totalBars: self => 4,\r\n\r\n    numOctavesVisibleInViewport: self => self.octaveEnd - self.octaveStart,\r\n    numBarsVisibleInViewport: self => self.viewportEnd - self.viewportStart,\r\n\r\n    barWidth: self => 100 / self.numBarsVisibleInViewport,\r\n    noteWidth: self => 100 / (self.numBarsVisibleInViewport * 16),\r\n    noteHeight: self => 100 / (self.numOctavesVisibleInViewport * 12),\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      this.width = parseInt(window.getComputedStyle(this.$el).width, 10);\r\n      this.height = parseInt(window.getComputedStyle(this.$el).height, 10);\r\n    });\r\n    window.addEventListener('key-event-down-norepeat', e => {\r\n      this.onKeyDown(e.detail);\r\n    });\r\n    this.update_();\r\n  },\r\n  methods: {\r\n    update_() {\r\n      if(this.playing) {\r\n        const upcomingEvents = this.getUpcomingEvents(this.sequencePosition * this.secondsPerBar, this.lookahead);\r\n        upcomingEvents.on.forEach(note => {\r\n          const noteStartOffset = note.x * this.secondsPerSixteenthNote;\r\n          let noteOnTime = noteStartOffset + this.sequenceDuration * note.onTriggerCount;\r\n          noteOnTime += sequenceStartTime;\r\n          note.onTriggerCount++;\r\n          this.$emit('noteOn', { note, whenTime: noteOnTime });\r\n        });\r\n        upcomingEvents.off.forEach(note => {\r\n          const noteEndOffset = note.x * this.secondsPerSixteenthNote + this.secondsPerSixteenthNote * 16 * note.duration;\r\n          let noteOffTime = noteEndOffset + this.sequenceDuration * note.offTriggerCount;\r\n          noteOffTime += sequenceStartTime;\r\n          note.offTriggerCount++;\r\n          this.$emit('noteOff', { note, whenTime: noteOffTime });\r\n        });\r\n\r\n        let dt = this.audioContext.currentTime - lastUpdate;\r\n        lastUpdate = this.audioContext.currentTime;\r\n        this.sequencePosition += dt / this.secondsPerBar;\r\n        if(this.sequencePosition > this.totalBars) {\r\n          this.sequencePosition -= this.totalBars;\r\n          this.sequenceCurrentLoop++;\r\n        }\r\n      }\r\n      window.requestAnimationFrame(this.update_);\r\n    },\r\n    placeNote(x, y) {\r\n      /* If the note is placed while the sequencer is playing, add 1\r\n         if the note is placed behind the playhead,\r\n         to signal \"note has already triggered this playthrough\". */ \r\n      const bonus = x / 16 > this.sequencePosition ? 0 : 1;\r\n      const newNote = {\r\n        id: generateNoteId(),\r\n        pitch: y,\r\n        x, y, fineX: x, fineY: y,\r\n        duration: this.lastTouchedNote.duration, // In bars\r\n        selected: false,\r\n        onTriggerCount: this.sequenceCurrentLoop + bonus,\r\n        offTriggerCount: this.sequenceCurrentLoop + bonus,\r\n      };\r\n      this.notes.push(newNote);\r\n      return newNote;\r\n    },\r\n    removeNote(note) {\r\n      const index = this.notes.indexOf(note);\r\n      this.notes.splice(index, 1);\r\n    },\r\n    getUpcomingEvents(timeInSequence, lookahead) {\r\n      const upcomingEvents = {\r\n        on: [], off: []\r\n      };\r\n      const getEventsInInterval = (startTime, endTime, loopCompensation = 0) => {\r\n        return {\r\n          on: this.notes.filter(note => {\r\n            const noteStartOffset = note.x * this.secondsPerSixteenthNote;\r\n            return noteStartOffset >= startTime\r\n                && noteStartOffset <= endTime\r\n                && note.onTriggerCount === this.sequenceCurrentLoop + loopCompensation;\r\n          }),\r\n          off: this.notes.filter(note => {\r\n            const noteEndOffset = note.x * this.secondsPerSixteenthNote + this.secondsPerSixteenthNote;\r\n            return noteEndOffset >= startTime\r\n                && noteEndOffset <= endTime\r\n                && note.offTriggerCount === this.sequenceCurrentLoop + loopCompensation;\r\n          }),\r\n        }\r\n      }\r\n\r\n      const overshoot = timeInSequence + lookahead - this.sequenceDuration;\r\n      if(overshoot > 0) {\r\n        const eventsAtEnd = getEventsInInterval(timeInSequence, this.sequenceDuration);\r\n        const eventsAtStart = getEventsInInterval(0, overshoot, 1);\r\n        upcomingEvents.on.push(...eventsAtEnd.on);\r\n        upcomingEvents.on.push(...eventsAtStart.on);\r\n        upcomingEvents.off.push(...eventsAtEnd.off);\r\n        upcomingEvents.off.push(...eventsAtStart.off);\r\n      } else {\r\n        const events = getEventsInInterval(timeInSequence, timeInSequence + lookahead);\r\n        upcomingEvents.on.push(...events.on);\r\n        upcomingEvents.off.push(...events.off);\r\n      }\r\n      return upcomingEvents;\r\n    },\r\n    play() {\r\n      this.stop();\r\n      this.playing = true;\r\n      sequenceStartTime = this.audioContext.currentTime;\r\n      lastUpdate = this.audioContext.currentTime;\r\n    },\r\n    stop() {\r\n      this.sequencePosition = 0;\r\n      this.sequenceCurrentLoop = 0;\r\n      this.playing = false;\r\n      this.notes.forEach(note => {\r\n        note.onTriggerCount = 0;\r\n        note.offTriggerCount = 0;\r\n      });\r\n      this.$emit('stop');\r\n    },\r\n    resume() {\r\n      this.playing = true;\r\n    },\r\n    onPointerDown(e, note) {\r\n      if(e.button === BUTTONS.LEFT_MOUSE) {\r\n        this.$el.setPointerCapture(e.pointerId);\r\n        if(e.ctrlKey) {\r\n          const { xFine, yFine } = this.coordsToNote(e.offsetX, e.offsetY);\r\n          this.selection = new SelectionRect(xFine, yFine);\r\n          this.selecting = true;\r\n        } else if(e.shiftKey) {\r\n          // Pointer down + shift = duplicate selected notes,\r\n          // deselect current notes, select new notes and\r\n          // place them in hand for moving around\r\n          const selectedNotes = this.notes.filter(note => note.selected);\r\n          this.notesInHand = [];\r\n          selectedNotes.forEach(selectedNote => {\r\n            const newNote = {\r\n              ...selectedNote,\r\n              id: generateNoteId(),\r\n            };\r\n            this.notes.push(newNote);\r\n            this.notesInHand.push(newNote);\r\n            selectedNote.selected = false;\r\n          });\r\n        } else if(!note) {\r\n          const { x, y } = this.coordsToNote(e.offsetX, e.offsetY);\r\n          const newNote = this.placeNote(x, y);\r\n          this.notesInHand.push(newNote);\r\n          if(this.notesInHand.length === 1) {\r\n            this.emitPreviewOn(newNote.pitch);\r\n          }\r\n          this.deselectAllNotes();\r\n        } else {\r\n          this.notesInHand = [note];\r\n          this.notesInHand.push(...this.notes.filter(\r\n            n => n.selected === true && note !== n\r\n          ));\r\n          if(this.notesInHand.length === 1) {\r\n            this.emitPreviewOn(note.pitch);\r\n          }\r\n        }\r\n        if(note) {\r\n          this.lastTouchedNote.duration = note.duration;\r\n        }\r\n      } else if(e.button === BUTTONS.RIGHT_MOUSE) {\r\n        this.notes.forEach(note => note.selected = false);\r\n      }\r\n    },\r\n    onPointerUp(e, note) {\r\n      this.$el.releasePointerCapture(e.pointerId);\r\n      if(e.button === BUTTONS.LEFT_MOUSE) {\r\n        const { x, y } = this.coordsToNote(e.offsetX, e.offsetY);\r\n        this.notes.forEach(note => {\r\n          if(this.selecting && \r\n             !(note.fineX < this.selection.left\r\n            || note.fineX > this.selection.right\r\n            || note.fineY < this.selection.top\r\n            || note.fineY > this.selection.bottom)) {\r\n              note.selected = true;\r\n          }\r\n        });\r\n        this.notesInHand.forEach(note => {\r\n          note.fineX = note.x;\r\n          note.fineY = note.y;\r\n        });\r\n        this.notesInHand = [];\r\n        this.emitPreviewOff();\r\n      }\r\n      this.selecting = false;\r\n    },\r\n    onPointerMove(e, note) {\r\n      if (this.$el.hasPointerCapture(e.pointerId)) {\r\n        this.notesInHand.forEach(note => {\r\n          note.fineX += e.movementX / (this.width / this.numBarsVisibleInViewport / 16);\r\n          note.fineY -= e.movementY / (this.height / this.numOctavesVisibleInViewport / 12);\r\n          note.x = Math.max(0, Math.round(note.fineX));\r\n          const oldPitch = note.y;\r\n          note.y = Math.round(note.fineY);\r\n          note.pitch = note.y;\r\n          if(this.notesInHand.length === 1 && note.pitch !== oldPitch) {\r\n            this.emitPreviewOn(note.pitch);\r\n          }\r\n        });\r\n        if(e.ctrlKey) {\r\n          const { xFine, yFine } = this.coordsToNote(e.offsetX, e.offsetY);\r\n          this.selection.end.x = xFine;\r\n          this.selection.end.y = yFine;\r\n        }\r\n      }\r\n      //console.log((e.buttons & BUTTONS.RIGHT_MOUSE) > 0)\r\n      if((e.buttons & BUTTONS.RIGHT_MOUSE) > 0 && note) {\r\n        this.removeNote(note);\r\n      }\r\n    },\r\n    emitPreviewOn(pitch) {\r\n      this.emitPreviewOff();\r\n      this.previewNote = { id: 'preview', pitch };\r\n      this.$emit('noteOn', { note: this.previewNote, whenTime: this.audioContext.currentTime });\r\n    },\r\n    emitPreviewOff() {\r\n      if(this.previewNote) {\r\n        this.$emit('noteOff', { note: this.previewNote, whenTime: this.audioContext.currentTime });\r\n      }\r\n    },\r\n    onKeyDown(e) {\r\n      (({\r\n        'Delete': () => {\r\n          this.notes = this.notes.filter(note => !note.selected);\r\n        },\r\n        'KeyA': () => {\r\n          if(e.ctrlKey) {\r\n            this.notes.forEach(note => note.selected = true);\r\n          }\r\n        },\r\n      })[e.code] || (() => null))();\r\n    },\r\n    onResizeNoteStart(e, note) {\r\n      e.target.setPointerCapture(e.pointerId);\r\n    },\r\n    onResizeNoteEnd(e, note) {\r\n      e.target.releasePointerCapture(e.pointerId);\r\n    },\r\n    onResizeNote(e, note) {\r\n      if (e.target.hasPointerCapture(e.pointerId)) {\r\n        const moveX = e.movementX / (this.width / this.numBarsVisibleInViewport);\r\n        const selectedNotes = this.notes.filter(note => note.selected);\r\n        if(!selectedNotes.includes(note)) {\r\n          selectedNotes.push(note);\r\n        }\r\n        selectedNotes.forEach(note => {\r\n          note.duration = Math.max(1 / 64, note.duration + moveX);\r\n        });\r\n      }\r\n    },\r\n    deselectAllNotes() {\r\n      this.notes.forEach(note => note.selected = false);\r\n    },\r\n    coordsToNote(x, y) {\r\n      const pixelsPerBar = this.width / this.numBarsVisibleInViewport;\r\n      const pixelsPerOctave = this.height / this.numOctavesVisibleInViewport;\r\n      const pixelsPer16th = pixelsPerBar / 16;\r\n      const pixelsPerNote = this.height * (this.noteHeight / 100);\r\n      const xFineOut = (x + this.viewportStart * pixelsPerBar) / pixelsPer16th;\r\n      const yFineOut = (this.octaveStart * pixelsPerOctave + (this.height - y)) / pixelsPerNote;\r\n      const xOut = Math.floor(xFineOut);\r\n      const yOut = Math.floor(yFineOut);\r\n      return { x: xOut, y: yOut, xFine: xFineOut, yFine: yFineOut, };\r\n    },\r\n    exportNotes() {\r\n      return this.notes.map(note => ({\r\n        x: note.x,\r\n        y: note.y,\r\n      }));\r\n    },\r\n    importNotes(importedNotes) {\r\n      importedNotes.forEach(note => {\r\n        this.placeNote(note.x, note.y);\r\n      });\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import '../browser-check.scss';\r\n\r\nsvg {\r\n  shape-rendering: crispEdges;\r\n  @include browser(Firefox) {\r\n    shape-rendering: auto;\r\n  }\r\n  position: relative;\r\n  bottom: 0;\r\n}\r\n.note {\r\n  stroke: #41495f;\r\n}\r\n.note-placed {\r\n  fill: #29365a;\r\n  stroke: #0f1936;\r\n}\r\n.note-selected {\r\n  fill: #304fa5;\r\n}\r\n.note-resize-handle {\r\n  cursor: ew-resize;\r\n  fill: transparent;\r\n  stroke: none;\r\n}\r\n\r\n.note-line {\r\n  stroke: #3c3434;\r\n  stroke-width: 1;\r\n}\r\n.bar-line {\r\n  stroke: #1d1b1b;\r\n  stroke-width: 2;\r\n}\r\n.octave-line {\r\n  stroke: #181717;\r\n  stroke-width: 0;\r\n}\r\n.e-to-f-line {\r\n  stroke: #1d1b1b;\r\n  stroke-width: 0;\r\n}\r\n.beat-line {\r\n  stroke: #3a3333;\r\n  stroke-width: 1;\r\n}\r\n\r\n.note-empty {\r\n  fill: transparent;\r\n}\r\n.bg1 {\r\n  fill: #6d6966;\r\n}\r\n.bg2 {\r\n  fill: #63615f;\r\n}\r\n.blackKeyGrid {\r\n  fill: #575757b8;\r\n}\r\n\r\n.octave-text {\r\n  // font-size: 3px;\r\n  fill: yellow;\r\n}\r\n\r\n.selection-rectangle {\r\n  fill: none;\r\n  stroke: yellow;\r\n  stroke-width: 1;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sequencer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sequencer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./sequencer.vue?vue&type=template&id=c9fb0042&scoped=true&\"\nimport script from \"./sequencer.vue?vue&type=script&lang=js&\"\nexport * from \"./sequencer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./sequencer.vue?vue&type=style&index=0&id=c9fb0042&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c9fb0042\",\n  null\n  \n)\n\ncomponent.options.__file = \"sequencer.vue\"\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"scrollbarContainer\",class:['scrollbar-container', (\"scrollbar-container-\" + _vm.orientation)]},[_c('div',{ref:\"handle\",class:['handle', (\"handle-\" + _vm.orientation), _vm.mode === _vm.MODES.move ? 'handle-active' : ''],style:(_vm.handleStyle),on:{\"pointerdown\":_vm.onPointerDown,\"pointerup\":_vm.onPointerUp,\"pointermove\":_vm.onPointerMove}},[_c('div',{ref:\"resizeStart\",class:['resize-handle', (\"resize-handle-\" + _vm.orientation)]}),_c('div',{ref:\"resizeEnd\",class:['resize-handle', (\"resize-handle-\" + _vm.orientation)]})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div :class=\"['scrollbar-container', `scrollbar-container-${orientation}`]\" ref=\"scrollbarContainer\">\r\n    <div :class=\"['handle', `handle-${orientation}`, mode === MODES.move ? 'handle-active' : '']\" ref=\"handle\"\r\n         @pointerdown=\"onPointerDown\"\r\n         @pointerup=\"onPointerUp\"\r\n         @pointermove=\"onPointerMove\"\r\n         :style=\"handleStyle\">\r\n         <div :class=\"['resize-handle', `resize-handle-${orientation}`]\" ref=\"resizeStart\"></div>\r\n         <div :class=\"['resize-handle', `resize-handle-${orientation}`]\" ref=\"resizeEnd\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nconst MODES = {\r\n  none: 0,\r\n  move: 1,\r\n  resizeStart: 2,\r\n  resizeEnd: 3,\r\n}\r\n\r\nexport default {\r\n  name: 'ZoomScrollbar',\r\n  props: {\r\n    orientation: {\r\n      type: String,\r\n      default: 'horizontal',\r\n      validator: value => ['horizontal', 'vertical'].indexOf(value) !== -1\r\n    },\r\n    min: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    max: {\r\n      type: Number,\r\n      default: 1,\r\n    },\r\n    low: {\r\n      type: Number,\r\n      default: 0.25,\r\n    },\r\n    high: {\r\n      type: Number,\r\n      default: 0.75,\r\n    },\r\n    reverse: {\r\n      type: Boolean,\r\n      default: false,\r\n    }\r\n  },\r\n  data: () => ({\r\n    MODES,\r\n    mode: MODES.none,\r\n    pointerStartPosition_: null,\r\n  }),\r\n  methods: {\r\n    onPointerDown (e) {\r\n      if(e.target === this.$refs['handle']) {\r\n        this.mode = MODES.move;\r\n      } else if(e.target === this.$refs.resizeStart) {\r\n        this.mode = MODES.resizeStart;\r\n        if(this.reverse) {\r\n          this.mode = MODES.resizeEnd;\r\n        }\r\n      } else if(e.target === this.$refs.resizeEnd) {\r\n        this.mode = MODES.resizeEnd;\r\n        if(this.reverse) {\r\n          this.mode = MODES.resizeStart;\r\n        }\r\n      }\r\n      this.pointerStartPosition_ = {\r\n        x: (e.clientX - this.$refs.handle.offsetLeft) / this.$refs.handle.offsetWidth,\r\n        y: (e.clientY - this.$refs.handle.offsetTop) / this.$refs.handle.offsetHeight,\r\n      };\r\n      e.target.setPointerCapture(e.pointerId)\r\n    },\r\n    onPointerUp (e) {\r\n      e.target.releasePointerCapture(e.pointerId)\r\n      this.mode = MODES.none;\r\n    },\r\n    onPointerMove (e) {\r\n      if (e.target.hasPointerCapture(e.pointerId)) {\r\n        let d = this.orientation === 'horizontal'\r\n                ? e.movementX / (this.width / (this.max - this.min))\r\n                : e.movementY / (this.height / (this.max - this.min));\r\n        const startPosInPixels = {\r\n          x: this.pointerStartPosition_.x * this.$refs.handle.offsetWidth,\r\n          y: this.pointerStartPosition_.y * this.$refs.handle.offsetHeight,\r\n        }\r\n        if(this.reverse) {\r\n          d *= -1;\r\n        }\r\n        if(this.orientation === 'horizontal') {\r\n          const bla = e.clientX - this.$refs.handle.offsetLeft;\r\n          if((e.movementX < 0 && bla > startPosInPixels.x)\r\n          || (e.movementX > 0 && bla < startPosInPixels.x)) {\r\n              d = 0;\r\n          }\r\n        } else {\r\n          const bla2 = e.clientY - this.$refs.handle.offsetTop;\r\n          if((e.movementY < 0 && bla2 > startPosInPixels.y)\r\n          || (e.movementY > 0 && bla2 < startPosInPixels.y)) {\r\n            d = 0;\r\n          }\r\n        }\r\n\r\n        (({\r\n          [MODES.move]: () => {\r\n            let newLow, newHigh;\r\n            if(this.low + d < this.min) {\r\n              newLow = this.min;\r\n              newHigh = this.high - (this.low - newLow);\r\n            } else if(this.high + d > this.max) {\r\n              newLow = this.low + (this.max - this.high);\r\n              newHigh = this.max;\r\n            } else {\r\n              newLow = this.low + d;\r\n              newHigh = this.high + d;\r\n            }\r\n            this.$emit('lowChanged', newLow);\r\n            this.$emit('highChanged', newHigh);\r\n          },\r\n          [MODES.resizeStart]: () => {\r\n            let newVal;\r\n            if(this.low + d < this.min) {\r\n              newVal = this.min;\r\n            } else if(this.high - (this.low + d) > this.minDistance) {\r\n              newVal = this.low + d;\r\n            } else {\r\n              newVal = this.high - this.minDistance;\r\n            }\r\n            this.$emit('lowChanged', newVal);\r\n          },\r\n          [MODES.resizeEnd]: () => {\r\n            let newVal;\r\n            if(this.high + d > this.max) {\r\n              newVal = this.max;\r\n            } else if((this.high + d) - this.low > this.minDistance) {\r\n              newVal = this.high + d;\r\n            } else {\r\n              newVal = this.low + this.minDistance;\r\n            }\r\n            this.$emit('highChanged', newVal);\r\n          },\r\n        })[this.mode] || (() => null))();\r\n      }\r\n    },\r\n  },\r\n  computed: {\r\n    width: self => parseInt(window.getComputedStyle(self.$refs.scrollbarContainer).width, 10),\r\n    height: self => parseInt(window.getComputedStyle(self.$refs.scrollbarContainer).height, 10),\r\n    handleStyle: self => {\r\n      let pos = `calc(${((self.low - self.min) / (self.max - self.min)) * 100}% - 1px)`;\r\n      let size = `calc(${(self.high - self.low) / (self.max - self.min) * 100}% + 2px)`;\r\n      if(self.reverse) {\r\n        pos = `calc(${(1-((self.high - self.min) / (self.max - self.min))) * 100}% - 1px)`;\r\n        //pos = `calc(${(1- ((50       - 0)         / (200      - 0)))        * 100}% - 1px)`;\r\n        size = `calc(${(self.high - self.low) / (self.max - self.min) * 100}% + 2px)`;\r\n      }\r\n      return {\r\n        horizontal: { left: pos, width: size, },\r\n        vertical: { top: pos, height: size, },\r\n      }[self.orientation];\r\n    },\r\n    minDistance: self => (self.max - self.min) * 0.1,\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.scrollbar-container {\r\n  border: 1px solid black;\r\n  background: #484848;\r\n  &-horizontal {\r\n  }\r\n  &-vertical {\r\n  }\r\n}\r\n.handle {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  position: relative;\r\n  background: #a0a0a0;\r\n  box-sizing: border-box;\r\n  transition: background 100ms linear;\r\n  &-active {\r\n    background: #8a8a8a;\r\n  }\r\n  &-horizontal {\r\n    flex-direction: row;\r\n    width: 20px;\r\n    height: 100%;\r\n    border-left: 1px solid black;\r\n    border-right: 1px solid black;\r\n  }\r\n  &-vertical {\r\n    flex-direction: column;\r\n    width: 100%;\r\n    height: 20px;\r\n    border-top: 1px solid black;\r\n    border-bottom: 1px solid black;\r\n  }\r\n}\r\n.resize-handle {\r\n  position: relative;\r\n  &-horizontal {\r\n    cursor: ew-resize;\r\n    width: 10px;\r\n    height: 100%;\r\n    &:first-child {\r\n      left: -5px;\r\n      &::before {\r\n        content: '';\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        left: 2px;\r\n        background: black;\r\n        clip-path: polygon(100% 20%, 50% 50%, 100% 80%);\r\n      }\r\n    }\r\n    &:last-child {\r\n      right: -5px;\r\n      &::before {\r\n        content: '';\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        right: 2px;\r\n        background: black;\r\n        clip-path: polygon(0% 20%, 50% 50%, 0% 80%);\r\n      }\r\n    }\r\n  }\r\n  &-vertical {\r\n    cursor: ns-resize;\r\n    height: 10px;\r\n    width: 100%;\r\n    &:first-child {\r\n      top: -5px;\r\n      &::before {\r\n        content: '';\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        top: 2px;\r\n        background: black;\r\n        clip-path: polygon(20% 100%, 50% 50%, 80% 100%);\r\n      }\r\n    }\r\n    &:last-child {\r\n      bottom: -5px;\r\n      &::before {\r\n        content: '';\r\n        position: absolute;\r\n        width: 100%;\r\n        height: 100%;\r\n        bottom: 2px;\r\n        background: black;\r\n        clip-path: polygon(20% 0%, 50% 50%, 80% 0%);\r\n      }\r\n    }\r\n  }\r\n  &:first-child {\r\n    align-self: start;\r\n  }\r\n  &:last-child {\r\n    align-self: end;\r\n  }\r\n}\r\n</style>\r\n\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./zoom-scrollbar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./zoom-scrollbar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./zoom-scrollbar.vue?vue&type=template&id=46013b70&scoped=true&\"\nimport script from \"./zoom-scrollbar.vue?vue&type=script&lang=js&\"\nexport * from \"./zoom-scrollbar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./zoom-scrollbar.vue?vue&type=style&index=0&id=46013b70&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"46013b70\",\n  null\n  \n)\n\ncomponent.options.__file = \"zoom-scrollbar.vue\"\nexport default component.exports","const common = {\r\n  tooltip: false\r\n}\r\n\r\nexport default {\r\n  horizontal: {\r\n    ...common,\r\n    width: 200,\r\n    height: 5\r\n  },\r\n  verticalADSR: {\r\n    ...common,\r\n    direction: 'vertical',\r\n    width: 5,\r\n    height: 100,\r\n    tooltip: 'hover',\r\n    'tooltip-dir': 'top',\r\n  },\r\n}\r\n","export class Observable {\r\n  static staticLookup = {};\r\n\r\n  constructor() {\r\n    this.lookup = {};\r\n  }\r\n  addEventListener(identifier, callback) {\r\n    if (!(identifier in this.lookup)) {\r\n      this.lookup[identifier] = [callback];\r\n    } else {\r\n      if (callback in this.lookup[identifier]) {\r\n        // TODO: Emit warning that callback has already been registered\r\n      } else {\r\n        this.lookup[identifier].push(callback);\r\n      }\r\n    }\r\n  }\r\n  removeEventListener(identifier, callback) {\r\n    if (identifier in this.lookup) {\r\n      //  && callback in this.lookup[identifier]\r\n      const index = this.lookup[identifier].findIndex(cb => cb === callback);\r\n      if (index >= 0) {\r\n        this.lookup[identifier].splice(index, 1);\r\n      } else {\r\n        // TODO: Emit warning that can't remove callback that hasn't been registered\r\n      }\r\n    } else {\r\n      // TODO: Emit warning that can't remove callback that hasn't been registered\r\n    }\r\n  }\r\n  dispatchEvent(identifier, eventData) {\r\n    if (identifier in this.lookup) {\r\n      this.lookup[identifier].forEach(callback => {\r\n        callback(eventData);\r\n      });\r\n    }\r\n  }\r\n\r\n  static createObservableMember(propName, defaultValue) {\r\n    Observable.staticLookup[this.name] =\r\n      Observable.staticLookup[this.name] || {};\r\n    let val = defaultValue;\r\n    Object.defineProperty(\r\n      this.prototype.constructor.prototype.constructor,\r\n      propName,\r\n      {\r\n        get: () => val,\r\n        set: newVal => {\r\n          val = newVal;\r\n          this.dispatchEvent(`${propName}Changed`, newVal);\r\n        },\r\n      },\r\n    );\r\n  }\r\n  static addEventListener(identifier, callback) {\r\n    if (!(identifier in Observable.staticLookup[this.name])) {\r\n      Observable.staticLookup[this.name][identifier] = [callback];\r\n    } else {\r\n      if (callback in Observable.staticLookup[this.name][identifier]) {\r\n        // TODO: Emit warning that callback has already been registered\r\n      } else {\r\n        Observable.staticLookup[this.name][identifier].push(callback);\r\n      }\r\n    }\r\n  }\r\n  static removeEventListener(identifier, callback) {\r\n    if (identifier in Observable.staticLookup[this.name]) {\r\n      //  && callback in this.lookup[identifier]\r\n      const index = Observable.staticLookup[this.name][identifier].findIndex(\r\n        cb => cb === callback,\r\n      );\r\n      if (index >= 0) {\r\n        Observable.staticLookup[this.name][identifier].splice(index, 1);\r\n      } else {\r\n        // TODO: Emit warning that can't remove callback that hasn't been registered\r\n      }\r\n    } else {\r\n      // TODO: Emit warning that can't remove callback that hasn't been registered\r\n    }\r\n  }\r\n  static dispatchEvent(identifier, eventData) {\r\n    if (identifier in Observable.staticLookup[this.name]) {\r\n      Observable.staticLookup[this.name][identifier].forEach(callback => {\r\n        callback(eventData);\r\n      });\r\n    }\r\n  }\r\n}\r\n","export default class ADSR {\r\n  constructor(amplitude, audioCtx) {\r\n    this.ctx = audioCtx\r\n    this.constantSource = audioCtx.createConstantSource()\r\n    this.attack = 0\r\n    this.decay = 0\r\n    this.sustain = 1\r\n    this.release = 0.5\r\n    this.tension = 0.2\r\n    this.amplitude = amplitude\r\n    this.connect = this.constantSource.connect.bind(this.constantSource)\r\n  }\r\n  noteOn(whenTime) {    \r\n    this.constantSource.offset.cancelScheduledValues(whenTime)\r\n    this.constantSource.offset.setValueAtTime(0, whenTime)\r\n    this.constantSource.offset.setTargetAtTime(this.amplitude, whenTime, this.tension * this.attack);\r\n    this.constantSource.offset.setTargetAtTime(this.amplitude * this.sustain, whenTime + this.attack, this.tension * this.decay);\r\n    this.constantSource.start(whenTime)\r\n  }\r\n  noteOff(whenTime) {\r\n    // this.constantSource.offset.cancelScheduledValues(whenTime);\r\n    this.constantSource.offset.cancelAndHoldAtTime(whenTime);\r\n    this.constantSource.offset.setTargetAtTime(0, whenTime, this.tension * this.release);\r\n    // Would it be good to stop? If so, figure out how long transition takes and fill in value\r\n    // this.constantSource.stop(whenTime + this.release);\r\n  }\r\n}","import { Observable } from './observable'\r\nimport ADSR from './adsr'\r\n\r\nconst midiNoteToFrequency = (function() {\r\n  var midiNoteFrequencies = [];\r\n  for (var x = 0; x < 127; ++x) {\r\n     midiNoteFrequencies[x] = (440 / 32) * (Math.pow(2, ((x - 9) / 12)));\r\n  }\r\n  return function(midiNoteNumber) {\r\n    return midiNoteFrequencies[midiNoteNumber];\r\n  }\r\n})();\r\n\r\nexport const SHAPES = {\r\n  sine: 'sine',\r\n  square: 'square',\r\n  sawtooth: 'sawtooth',\r\n  triangle: 'triangle',\r\n}\r\n\r\nexport default class Voice extends Observable {\r\n  /**\r\n   * @param {AudioContext} audioCtx\r\n   */\r\n  constructor(audioCtx) {\r\n    super();\r\n    this.audioCtx = audioCtx;\r\n\r\n    this.osc1Nodes = [];\r\n    for(let i = 0; i < Voice.osc1voices; i++) {\r\n      this.osc1Nodes[i] = audioCtx.createOscillator();\r\n      this.osc1Nodes[i].type = Voice.osc1shape;\r\n    }\r\n    this.osc2Nodes = [];\r\n    if(Voice.osc2active) {\r\n      for(let i = 0; i < Voice.osc2voices; i++) {\r\n        this.osc2Nodes[i] = audioCtx.createOscillator();\r\n        this.osc2Nodes[i].type = Voice.osc2shape;\r\n      }\r\n    }\r\n\r\n    this.biquadFilter = audioCtx.createBiquadFilter();\r\n    this.osc1gainNode = audioCtx.createGain();\r\n    this.osc2gainNode = audioCtx.createGain();\r\n\r\n    \r\n    this.osc1volumeADSR = new ADSR(Voice.osc1volume / Voice.osc1voices, audioCtx);\r\n    this.osc1volumeADSR.attack = Voice.volumeAttack;\r\n    this.osc1volumeADSR.decay = Voice.volumeDecay;\r\n    this.osc1volumeADSR.sustain = Voice.volumeSustain;\r\n    this.osc1volumeADSR.release = Voice.volumeRelease;\r\n    this.osc2volumeADSR = new ADSR(Voice.osc2volume / Voice.osc2voices, audioCtx);\r\n    this.osc2volumeADSR.attack = Voice.volumeAttack;\r\n    this.osc2volumeADSR.decay = Voice.volumeDecay;\r\n    this.osc2volumeADSR.sustain = Voice.volumeSustain;\r\n    this.osc2volumeADSR.release = Voice.volumeRelease;\r\n\r\n    this.filterADSR = new ADSR((22000 - Voice.filterCutoff) * Voice.filterEnvelopeAmount, audioCtx);\r\n    this.filterADSR.attack = Voice.filterAttack;\r\n    this.filterADSR.decay = Voice.filterDecay;\r\n    this.filterADSR.sustain = Voice.filterSustain;\r\n    this.filterADSR.release = Voice.filterRelease;\r\n\r\n    this.biquadFilter.type = 'lowpass';\r\n    this.biquadFilter.Q.setValueAtTime(Voice.filterResonance, audioCtx.currentTime);\r\n    \r\n    this.osc1gainNode.gain.setValueAtTime(0, audioCtx.currentTime);\r\n    this.osc2gainNode.gain.setValueAtTime(0, audioCtx.currentTime);\r\n\r\n    this.osc1volumeADSR.connect(this.osc1gainNode.gain);\r\n    this.osc2volumeADSR.connect(this.osc2gainNode.gain);\r\n    this.filterADSR.connect(this.biquadFilter.frequency);\r\n    this.filterADSR.tension = 0.5\r\n    \r\n    this.osc1Nodes.forEach(node => {\r\n      node.connect(this.osc1gainNode)\r\n          .connect(this.biquadFilter);\r\n    });\r\n    \r\n    this.osc2Nodes.forEach(node => {\r\n      node.connect(this.osc2gainNode)\r\n          .connect(this.biquadFilter);\r\n    });\r\n\r\n    this.connect = this.biquadFilter.connect.bind(this.biquadFilter);\r\n    this.disconnect = this.biquadFilter.disconnect.bind(this.biquadFilter);\r\n\r\n    Voice.addEventListener('osc1shapeChanged', () => {\r\n\r\n    });\r\n  }\r\n  noteOn(midiNote, whenTime = this.audioCtx.currentTime) {\r\n    whenTime = Math.max(whenTime, this.audioCtx.currentTime);\r\n    this.biquadFilter.frequency.setValueAtTime(Voice.filterCutoff, whenTime);\r\n\r\n    for(let i = 0; i < this.osc1Nodes.length; i++) {\r\n      let oct = Voice.osc1octave;\r\n      let detune = Voice.osc1detune;\r\n      let pitch = Voice.osc1pitch;\r\n      let freq = midiNoteToFrequency(midiNote + 12 * oct + pitch);\r\n      let evenOdd = i % 2 === 0 ? 1 : -1;\r\n      freq += freq * detune * evenOdd * 0.00002;\r\n      this.osc1Nodes[i].frequency.setValueAtTime(freq, whenTime);\r\n      this.osc1Nodes[i].start(whenTime);\r\n    }\r\n    for(let i = 0; i < this.osc2Nodes.length; i++) {\r\n      let oct = Voice.osc2octave;\r\n      let detune = Voice.osc2detune;\r\n      let pitch = Voice.osc2pitch;\r\n      let freq = midiNoteToFrequency(midiNote + 12 * oct + pitch);\r\n      let evenOdd = i % 2 === 0 ? 1 : -1;\r\n      freq += freq * detune * evenOdd * 0.00002;\r\n      this.osc2Nodes[i].frequency.setValueAtTime(freq, whenTime);\r\n      this.osc2Nodes[i].start(whenTime);\r\n    }\r\n      \r\n    this.osc1volumeADSR.noteOn(whenTime);\r\n    this.osc2volumeADSR.noteOn(whenTime);\r\n    this.filterADSR.noteOn(whenTime);\r\n  }\r\n  noteOff(whenTime = this.audioCtx.currentTime) {\r\n    whenTime = Math.max(whenTime, this.audioCtx.currentTime);\r\n    // https://alemangui.github.io/blog//2015/12/26/ramp-to-value.html\r\n    // TODO: Trigger release envelope\r\n    // Important! Setting a scheduled parameter value\r\n    // this.gainNode.gain.cancelScheduledValues(whenTime);\r\n    this.osc1volumeADSR.noteOff(whenTime);\r\n    this.osc2volumeADSR.noteOff(whenTime);\r\n    this.filterADSR.noteOff(whenTime);\r\n    /* this.gainNode.gain.setValueAtTime(Voice.volume, whenTime);\r\n    this.gainNode.gain.exponentialRampToValueAtTime(0.00001, whenTime + 3); */\r\n    for(let i = 0; i < this.osc1Nodes.length; i++) {\r\n      this.osc1Nodes[i].stop(whenTime + Voice.volumeRelease);\r\n    }\r\n    for(let i = 0; i < this.osc2Nodes.length; i++) {\r\n      this.osc2Nodes[i].stop(whenTime + Voice.volumeRelease);\r\n    }\r\n    // console.log(\"Stopping in: \" + parseFloat(whenTime - this.audioCtx.currentTime));\r\n    \r\n    window.setTimeout(() => {\r\n      this.osc1gainNode.disconnect();\r\n      this.osc2gainNode.disconnect();\r\n      this.biquadFilter.disconnect();\r\n      this.dispatchEvent('voiceDonePlaying');\r\n    }, ((whenTime + Voice.volumeRelease) - this.audioCtx.currentTime) * 1000);\r\n  }\r\n}\r\n\r\nVoice.createObservableMember('filterCutoff', 1);\r\nVoice.createObservableMember('filterResonance', 0);\r\n\r\nVoice.createObservableMember('osc1shape', SHAPES.sawtooth);\r\nVoice.createObservableMember('osc1active', true);\r\nVoice.createObservableMember('osc1voices', 1);\r\nVoice.createObservableMember('osc1detune', 0);\r\nVoice.createObservableMember('osc1octave', 0);\r\nVoice.createObservableMember('osc1pitch', 0);\r\nVoice.createObservableMember('osc1volume', 1);\r\n\r\nVoice.createObservableMember('osc2shape', SHAPES.square);\r\nVoice.createObservableMember('osc2active', false);\r\nVoice.createObservableMember('osc2voices', 1);\r\nVoice.createObservableMember('osc2detune', 0);\r\nVoice.createObservableMember('osc2octave', 0);\r\nVoice.createObservableMember('osc2pitch', 0);\r\nVoice.createObservableMember('osc2volume', 1);\r\n\r\nVoice.createObservableMember('volume', 0.1);\r\nVoice.createObservableMember('volumeAttack', 0);\r\nVoice.createObservableMember('volumeDecay', 0.5);\r\nVoice.createObservableMember('volumeSustain', 0.05);\r\nVoice.createObservableMember('volumeRelease', 0.5);\r\nVoice.createObservableMember('filterEnvelopeAmount', 1);\r\nVoice.createObservableMember('filterAttack', 0);\r\nVoice.createObservableMember('filterDecay', 0.5);\r\nVoice.createObservableMember('filterSustain', 0.05);\r\nVoice.createObservableMember('filterRelease', 0.5);","const a = document.createElement('a');\r\nlet url = null;\r\n\r\nexport function saveJSONtoFile(obj, filename) {\r\n  const blob = new Blob([ JSON.stringify(obj) ], { type: 'application/json' });\r\n  if(url) {\r\n    URL.revokeObjectURL(url);\r\n  }\r\n  url = URL.createObjectURL(blob);\r\n  a.href = url;\r\n  a.download = filename;\r\n  a.click();\r\n}","import { rejects } from \"assert\";\r\n\r\nconst fileSelect = document.createElement('input');\r\nfileSelect.type = 'file';\r\nfileSelect.accept = 'application/json';\r\nfileSelect.multiple = false;\r\n\r\nasync function importFile(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const fileReader = new FileReader();\r\n    fileReader.addEventListener('load', e => {\r\n      resolve(JSON.parse(e.target.result));\r\n    });\r\n    if(file instanceof File) {\r\n      fileReader.readAsText(file);\r\n    } else {\r\n      reject(new Error('No valid file selected.'));\r\n    }\r\n  });\r\n}\r\n\r\nexport async function importJSONfromFile() {\r\n  return new Promise((resolve, reject) => {\r\n    fileSelect.value = null;\r\n    fileSelect.click();\r\n    fileSelect.oninput = async () => {\r\n      try {\r\n        const result = await importFile(fileSelect.files[0]);\r\n        resolve(result);\r\n      } catch(e) { reject(e); }\r\n    };\r\n  });\r\n}\r\n\r\n\r\n","<template>\r\n  <div id=\"app\">\r\n    <fieldset class=\"oscillator-container\" v-for=\"(osc, i) in oscillators\" :key=\"'oscillator'+i\">\r\n      <legend>OSC {{ i + 1 }}</legend>\r\n      <label>\r\n        Active\r\n        <input type=\"checkbox\" v-model=\"osc.active\">\r\n      </label>\r\n      <label>\r\n        Shape\r\n        <select v-model=\"osc.shape\">\r\n          <option v-for=\"shape in SHAPES\"\r\n                  :key=\"shape\"\r\n                  :value=\"shape\">\r\n            {{ shape }}\r\n          </option>\r\n        </select>\r\n      </label>\r\n      <label>\r\n        Voices\r\n        <select v-model=\"osc.voices\">\r\n          <option v-for=\"voiceCount in 8\"\r\n                  :key=\"'voiceSelect'+voiceCount\"\r\n                  :value=\"voiceCount\">\r\n            {{ voiceCount }}\r\n          </option>\r\n        </select>\r\n      </label>\r\n      <label>\r\n        Detune\r\n        <vue-slider v-bind=\"sliderConfig.horizontal\"\r\n                    v-model=\"osc.detune\"\r\n                    :min=\"0\" :max=\"1200\" />\r\n      </label>\r\n      <label>\r\n        Octave\r\n        <select v-model=\"osc.octave\">\r\n          <option v-for=\"octave in 5\"\r\n                  :key=\"'octaveSelect'+octave\"\r\n                  :value=\"octave - 3\">\r\n            <template v-if=\"octave - 3 > 0\">+</template>\r\n            {{ octave - 3 }}\r\n          </option>\r\n        </select>\r\n      </label>\r\n      <label>\r\n        Pitch\r\n        <select v-model=\"osc.pitch\">\r\n          <option v-for=\"pitch in 25\"\r\n                  :key=\"'pitchSelect'+pitch\"\r\n                  :value=\"pitch - 13\">\r\n            <template v-if=\"pitch - 13 > 0\">+</template>\r\n            {{ pitch - 13 }}\r\n          </option>\r\n        </select>\r\n      </label>\r\n      <label>\r\n        Volume\r\n        <vue-slider v-bind=\"sliderConfig.horizontal\"\r\n                    v-model=\"osc.volume\"\r\n                    :interval=\"0.001\"\r\n                    :min=\"0\" :max=\"1\" />\r\n      </label>\r\n    </fieldset>\r\n    <fieldset>\r\n      <legend>Filter</legend>\r\n      <div class=\"filter-envelope-container\">\r\n        <knob :size=\"75\" label=\"Cutoff\" v-model=\"filterCutoff\" :min=\"5\" :max=\"22000\" scale=\"log\" />\r\n        <knob :size=\"75\" label=\"Resonance\" v-model=\"filterResonance\" :min=\"0\" :max=\"10\" />\r\n        <vue-slider v-bind=\"sliderConfig.verticalADSR\" v-model=\"filterEnvelopeAmount\" :min=\"0\" :max=\"1\" :interval=\"0.01\" />\r\n        <vue-slider v-bind=\"sliderConfig.verticalADSR\" v-model=\"filterA\" :min=\"0\" :max=\"1\" :interval=\"0.01\" />\r\n        <vue-slider v-bind=\"sliderConfig.verticalADSR\" v-model=\"filterD\" :min=\"0\" :max=\"1\" :interval=\"0.01\" />\r\n        <vue-slider v-bind=\"sliderConfig.verticalADSR\" v-model=\"filterS\" :min=\"0\" :max=\"1\" :interval=\"0.01\" />\r\n        <vue-slider v-bind=\"sliderConfig.verticalADSR\" v-model=\"filterR\" :min=\"0.01\" :max=\"1\" :interval=\"0.01\" />\r\n        <span>Env</span>\r\n        <span>A</span>\r\n        <span>D</span>\r\n        <span>S</span>\r\n        <span>R</span>\r\n      </div>\r\n    </fieldset>\r\n    <fieldset>\r\n      <legend>Amplitude</legend>\r\n      <div class=\"ASDR-container\">\r\n        <vue-slider v-bind=\"sliderConfig.verticalADSR\" v-model=\"volumeA\" :min=\"0\" :max=\"1\" :interval=\"0.01\" />\r\n        <vue-slider v-bind=\"sliderConfig.verticalADSR\" v-model=\"volumeD\" :min=\"0\" :max=\"1\" :interval=\"0.01\" />\r\n        <vue-slider v-bind=\"sliderConfig.verticalADSR\" v-model=\"volumeS\" :min=\"0\" :max=\"1\" :interval=\"0.01\" />\r\n        <vue-slider v-bind=\"sliderConfig.verticalADSR\" v-model=\"volumeR\" :min=\"0.01\" :max=\"1\" :interval=\"0.01\" />\r\n        <span>A</span>\r\n        <span>D</span>\r\n        <span>S</span>\r\n        <span>R</span>\r\n      </div>\r\n    </fieldset>\r\n    <div>\r\n      <vue-slider v-bind=\"sliderConfig.horizontal\" :min=\"0\" :max=\"0.5\" :interval=\"0.01\" v-model=\"volume\"/>\r\n      Volume: {{ volume }}\r\n      <vue-slider v-bind=\"sliderConfig.horizontal\" :min=\"80\" :max=\"200\" v-model=\"bpm\"/>\r\n      BPM: {{ bpm }}\r\n    </div>\r\n    <div class=\"kb-and-sequencer\">\r\n      <vue-keyboard ref=\"keyboard\" @noteOn=\"onKeyboardNoteOn\" @noteOff=\"onKeyboardNoteOff\"\r\n                    :octaveStart=\"verticalLow\" \r\n                    :octaveEnd=\"verticalHigh\" />\r\n      <zoom-scrollbar orientation=\"horizontal\"\r\n                      :min=\"0\"\r\n                      :max=\"4\"\r\n                      :low=\"horizontalLow\"\r\n                      :high=\"horizontalHigh\"\r\n                      @lowChanged=\"onScrollHorizontalLowChanged\"\r\n                      @highChanged=\"onScrollHorizontalHighChanged\" />\r\n      <zoom-scrollbar orientation=\"vertical\"\r\n                      :min=\"2\"\r\n                      :max=\"8\"\r\n                      :low=\"verticalLow\"\r\n                      :high=\"verticalHigh\"\r\n                      :reverse=\"true\"\r\n                      @lowChanged=\"onScrollVerticalLowChanged\"\r\n                      @highChanged=\"onScrollVerticalHighChanged\" />\r\n      <vue-sequencer ref=\"sequencer\" @noteOn=\"onSequencerNoteOn\" @noteOff=\"onSequencerNoteOff\"\r\n                    @stop=\"onSequencerStop\"\r\n                    :audioContext=\"audioCtx\"\r\n                    :bpm=\"bpm\"\r\n                    :viewportStart=\"horizontalLow\"\r\n                    :viewportEnd=\"horizontalHigh\"\r\n                    :octaveStart=\"verticalLow\"\r\n                    :octaveEnd=\"verticalHigh\" />\r\n    </div>\r\n    <input type=\"button\" value=\"Play/Pause\" @click=\"togglePlaying\">\r\n    <input type=\"button\" value=\"Export\" @click=\"exportNotes\">\r\n    <input type=\"button\" value=\"Import\" @click=\"importNotes\">\r\n    <input type=\"button\" value=\"Test\" @click=\"test\">\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport knob from './components/knob'\r\nimport vueSlider from 'vue-slider-component'\r\nimport vueKeyboard from './components/keyboard'\r\nimport vueSequencer from './components/sequencer'\r\nimport zoomScrollbar from './components/zoom-scrollbar'\r\nimport sliderConfig from './slider-config'\r\nimport Voice, { SHAPES } from './voice'\r\nimport { saveJSONtoFile } from './file-export.js'\r\nimport { importJSONfromFile } from './file-import.js'\r\nimport ADSR from './adsr';\r\n\r\nconst voices = {};\r\nconst generateNewId = (() => {\r\n  let c = 0;\r\n  return () => c++;\r\n})();\r\n\r\nlet keyboardTimeouts = [];\r\nwindow.voices = voices;\r\n\r\nexport default {\r\n  name: 'app',\r\n  components: {\r\n    knob,\r\n    vueSlider,\r\n    vueKeyboard,\r\n    vueSequencer,\r\n    zoomScrollbar,\r\n  },\r\n  data: () => ({\r\n    sliderConfig,\r\n    SHAPES,\r\n    audioCtx: new AudioContext(),\r\n    bpm: 120,\r\n    volume: 0.05,\r\n    oscillators: [{\r\n      shape: SHAPES.sawtooth,\r\n      active: true,\r\n      voices: 1,\r\n      detune: 0,\r\n      octave: 0,\r\n      pitch: 0,\r\n      volume: 1,\r\n    }, {\r\n      shape: SHAPES.square,\r\n      active: false,\r\n      voices: 1,\r\n      detune: 0,\r\n      octave: 0,\r\n      pitch: 0,\r\n      volume: 1,\r\n    }],\r\n    mainGainNode: null,\r\n    filterCutoff: 22000,\r\n    filterResonance: 0,\r\n    volumeA: 0,\r\n    volumeD: 0,\r\n    volumeS: 1,\r\n    volumeR: 0.01,\r\n    filterEnvelopeAmount: 0,\r\n    filterA: 0,\r\n    filterD: 0.5,\r\n    filterS: 0,\r\n    filterR: 0.01,\r\n    horizontalLow: 0,\r\n    horizontalHigh: 1,\r\n    verticalLow: 4,\r\n    verticalHigh: 5,\r\n  }),\r\n  computed: {\r\n    osc1active: self => self.oscillators[0].active,\r\n    osc1shape: self => self.oscillators[0].shape,\r\n    osc1voices: self => self.oscillators[0].voices,\r\n    osc1detune: self => self.oscillators[0].detune,\r\n    osc1octave: self => self.oscillators[0].octave,\r\n    osc1pitch: self => self.oscillators[0].pitch,\r\n    osc1volume: self => self.oscillators[0].volume,\r\n\r\n    osc2active: self => self.oscillators[1].active,\r\n    osc2shape: self => self.oscillators[1].shape,\r\n    osc2voices: self => self.oscillators[1].voices,\r\n    osc2detune: self => self.oscillators[1].detune,\r\n    osc2octave: self => self.oscillators[1].octave,\r\n    osc2pitch: self => self.oscillators[1].pitch,\r\n    osc2volume: self => self.oscillators[1].volume,\r\n  },\r\n  watch: {\r\n    volume(newValue, oldValue) {\r\n      this.mainGainNode.gain.setValueAtTime(newValue, this.audioCtx.currentTime);\r\n    },\r\n  },\r\n  mounted () {\r\n    this.mainGainNode = this.audioCtx.createGain();\r\n    this.mainGainNode.connect(this.audioCtx.destination);\r\n    this.mainGainNode.gain.setValueAtTime(this.volume, this.audioCtx.currentTime);\r\n    const link = (sourceField, cls, destinationField, transformFunction) => {\r\n      this.$watch(() => this[sourceField], () => {\r\n        if(transformFunction) {\r\n          cls[destinationField] = transformFunction(this[sourceField]);\r\n        } else {\r\n          cls[destinationField] = this[sourceField];\r\n        }\r\n      }, { immediate: true });\r\n    }\r\n    link('volumeA', Voice, 'volumeAttack');\r\n    link('volumeD', Voice, 'volumeDecay');\r\n    link('volumeS', Voice, 'volumeSustain');\r\n    link('volumeR', Voice, 'volumeRelease');\r\n\r\n    link('osc1active', Voice, 'osc1active');\r\n    link('osc1shape', Voice, 'osc1shape');\r\n    link('osc1voices', Voice, 'osc1voices');\r\n    link('osc1detune', Voice, 'osc1detune');\r\n    link('osc1octave', Voice, 'osc1octave');\r\n    link('osc1pitch', Voice, 'osc1pitch');\r\n    link('osc1volume', Voice, 'osc1volume');\r\n\r\n    link('osc2active', Voice, 'osc2active');\r\n    link('osc2shape', Voice, 'osc2shape');\r\n    link('osc2voices', Voice, 'osc2voices');\r\n    link('osc2detune', Voice, 'osc2detune');\r\n    link('osc2octave', Voice, 'osc2octave');\r\n    link('osc2pitch', Voice, 'osc2pitch');\r\n    link('osc2volume', Voice, 'osc2volume');\r\n\r\n    link('filterCutoff', Voice, 'filterCutoff');\r\n    link('filterResonance', Voice, 'filterResonance');\r\n    link('filterEnvelopeAmount', Voice, 'filterEnvelopeAmount');\r\n    link('filterA', Voice, 'filterAttack', val => Math.pow(val, 2));\r\n    link('filterD', Voice, 'filterDecay', val => Math.pow(val, 2));\r\n    link('filterS', Voice, 'filterSustain', val => Math.pow(val, 2));\r\n    link('filterR', Voice, 'filterRelease', val => Math.pow(val, 2));\r\n  },\r\n  methods: {\r\n    onKeyboardNoteOn({ pitch, id }) {\r\n      this.noteOn(id, pitch);\r\n    },\r\n    onKeyboardNoteOff({ pitch, id }) {\r\n      this.noteOff(id, pitch);\r\n    },\r\n    onSequencerNoteOn({ note, whenTime }) {\r\n      const { pitch, id } = note;\r\n      const delay = whenTime - this.audioCtx.currentTime;\r\n\r\n      const timeout = window.setTimeout(() => {\r\n        this.$refs.keyboard.keyDown(pitch, false);\r\n        let index = keyboardTimeouts.indexOf(timeout);\r\n        keyboardTimeouts.splice(index, 1);\r\n      }, delay * 1000);\r\n      keyboardTimeouts.push(timeout);\r\n\r\n      this.noteOn(id, pitch, whenTime);\r\n    },\r\n    onSequencerNoteOff({ note, whenTime }) {\r\n      const { pitch, id } = note;\r\n      const delay = whenTime - this.audioCtx.currentTime;\r\n\r\n      const timeout = window.setTimeout(() => {\r\n        this.$refs.keyboard.keyUp(pitch, false);\r\n        let index = keyboardTimeouts.indexOf(timeout);\r\n        keyboardTimeouts.splice(index, 1);\r\n      }, delay * 1000);\r\n      keyboardTimeouts.push(timeout);\r\n\r\n      this.noteOff(id, pitch, whenTime);\r\n    },\r\n    onSequencerStop() {\r\n      this.stopAllNotes();\r\n    },\r\n    onScrollHorizontalLowChanged(newVal) {\r\n      this.horizontalLow = newVal;\r\n    },\r\n    onScrollHorizontalHighChanged(newVal) {\r\n      this.horizontalHigh = newVal;\r\n    },\r\n    onScrollVerticalLowChanged(newVal) {\r\n      this.verticalLow = newVal;\r\n    },\r\n    onScrollVerticalHighChanged(newVal) {\r\n      this.verticalHigh = newVal;\r\n    },\r\n    stopAllNotes() {\r\n      this.$refs.keyboard.releaseAllKeys();\r\n      keyboardTimeouts.forEach(timeout => {\r\n        window.clearTimeout(timeout);\r\n      })\r\n      keyboardTimeouts = [];\r\n      Object.values(voices).forEach(voiceArray => {\r\n        voiceArray.forEach(voice => {\r\n          voice.noteOff();\r\n        });\r\n        voiceArray.length = 0;\r\n      });\r\n    },\r\n    noteOn(id, pitch, whenTime) {\r\n      const voice = new Voice(this.audioCtx);\r\n      if(id in voices) {\r\n        voices[id].push(voice);\r\n      } else {\r\n        voices[id] = [voice];\r\n      }\r\n      voice.connect(this.mainGainNode);\r\n      voice.noteOn(pitch, whenTime);\r\n      voice.addEventListener('voiceDonePlaying', () => {\r\n        voices[id] = voices[id].filter(v => v !== voice);\r\n      });\r\n      return voice;\r\n    },\r\n    noteOff(id, pitch, whenTime) {\r\n      if(id in voices && voices[id].length > 0) {\r\n        let voice = voices[id][voices[id].length - 1];\r\n        voice.noteOff(whenTime);        \r\n      }\r\n    },\r\n    togglePlaying() {\r\n      if(this.$refs.sequencer.playing) {\r\n        this.$refs.sequencer.stop();\r\n      } else {\r\n        this.$refs.sequencer.play();\r\n      } \r\n    },\r\n    exportNotes() {\r\n      const exportedNotes = this.$refs.sequencer.exportNotes();\r\n      saveJSONtoFile(exportedNotes, 'mySong');\r\n    },\r\n    importNotes() {\r\n      importJSONfromFile().then(json => {\r\n        this.$refs.sequencer.importNotes(json);\r\n      });\r\n    },\r\n    test() {\r\n      /* const bla = new Voice(this.audioCtx);\r\n      bla.noteOn(40, this.audioCtx.currentTime + 2);\r\n      bla.noteOff(40, this.audioCtx.currentTime + 1); */\r\n\r\n      /* const bla = new ADSR(1, this.audioCtx);\r\n      bla.noteOn(this.audioCtx.currentTime);\r\n      bla.noteOff(this.audioCtx.currentTime - 1); */\r\n\r\n      // TODO: Fix this crash:\r\n      const now = this.audioCtx.currentTime;\r\n      const cs = this.audioCtx.createConstantSource();\r\n      const dummy = this.audioCtx.createAnalyser();\r\n      cs.connect(dummy);\r\n      cs.offset.setTargetAtTime(1, now, 0);\r\n      cs.start(now)\r\n      cs.offset.cancelAndHoldAtTime(now + 2);\r\n      cs.offset.setTargetAtTime(0, now + 2, 0.002);\r\n      cs.offset.cancelAndHoldAtTime(now + 1);\r\n      cs.offset.setTargetAtTime(0, now + 1, 0.002);\r\n    }\r\n  },\r\n}\r\nwindow.Voice = Voice\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import url('https://fonts.googleapis.com/css?family=Roboto');\r\nbody {\r\n  user-select: none;\r\n  font-family: 'Roboto', sans-serif;\r\n}\r\n.oscillator-container {\r\n  label {\r\n    display: block;\r\n  }\r\n}\r\nfieldset {\r\n  display: inline-block;\r\n  vertical-align: middle; // Why is this necessary?\r\n}\r\n.ASDR-container {\r\n  display: inline-grid;\r\n  grid-template-columns: repeat(4, 25px);\r\n  grid-template-rows: auto 20px;\r\n  justify-items: center;\r\n}\r\n.filter-envelope-container {\r\n  display: inline-grid;\r\n  grid-template-columns: 90px 90px 60px repeat(4, 25px);\r\n  grid-template-rows: auto 20px;\r\n  justify-items: center;\r\n  :nth-child(1), :nth-child(2) {\r\n    grid-row: 1 / 3;\r\n    align-self: center;\r\n  }\r\n}\r\n.kb-and-sequencer {\r\n  display: grid;\r\n  grid-template-columns: 100px 700px 20px;\r\n  grid-template-rows: 20px 600px;\r\n  > :nth-child(1) {\r\n    grid-row: 2 / 3;\r\n    grid-column: 1;\r\n  }\r\n  > :nth-child(2) {\r\n    grid-row: 1;\r\n    grid-column: 2;\r\n  }\r\n  > :nth-child(3) {\r\n    grid-row: 2;\r\n    grid-column: 3;\r\n  }\r\n  > :nth-child(4) {\r\n    grid-row: 2;\r\n    grid-column: 2;\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4758d940&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sequencer.vue?vue&type=style&index=0&id=c9fb0042&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sequencer.vue?vue&type=style&index=0&id=c9fb0042&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./knob.vue?vue&type=style&index=0&id=693f9299&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./knob.vue?vue&type=style&index=0&id=693f9299&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./zoom-scrollbar.vue?vue&type=style&index=0&id=46013b70&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/lib/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./zoom-scrollbar.vue?vue&type=style&index=0&id=46013b70&lang=scss&scoped=true&\""],"sourceRoot":""}