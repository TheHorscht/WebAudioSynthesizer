(function(t){function e(e){for(var i,a,s=e[0],u=e[1],c=e[2],d=0,f=[];d<s.length;d++)a=s[d],o[a]&&f.push(o[a][0]),o[a]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],i=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},o={app:0},r=[];function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/WebAudioSynthesizer/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var l=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},2856:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("knob",{attrs:{size:50}}),n("knob",{attrs:{size:75}}),n("knob",{attrs:{size:100}}),n("div",{staticClass:"ASDR-container"},[n("vue-slider",t._b({},"vue-slider",t.sliderConfig.verticalASDR,!1)),n("vue-slider",t._b({},"vue-slider",t.sliderConfig.verticalASDR,!1)),n("vue-slider",t._b({},"vue-slider",t.sliderConfig.verticalASDR,!1)),n("vue-slider",t._b({},"vue-slider",t.sliderConfig.verticalASDR,!1)),n("span",[t._v("A")]),n("span",[t._v("S")]),n("span",[t._v("D")]),n("span",[t._v("R")])],1),n("vue-slider",t._b({},"vue-slider",t.sliderConfig.horizontal,!1)),n("div",{staticClass:"kb-and-sequencer"},[n("vue-keyboard",{ref:"keyboard",on:{noteOn:function(e){t.noteOn(e,"kb")},noteOff:function(e){t.noteOff(e,"kb")}}}),n("vue-sequencer",{ref:"sequencer",on:{noteOn:function(e){t.noteOn(e,"sq")},noteOff:function(e){t.noteOff(e,"sq")}}})],1),n("input",{attrs:{type:"button",value:"Play/Pause"},on:{click:t.togglePlaying}})],1)},r=[],a=(n("8615"),n("ac6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("svg",{attrs:{width:t.size,height:t.size,viewBox:"0 0 100 100",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[n("g",{on:{pointerdown:function(e){return e.stopPropagation(),t.pointerDown(e)},pointerup:function(e){return e.stopPropagation(),t.pointerUp(e)},pointermove:function(e){return e.stopPropagation(),t.pointerMove(e)}}},[n("circle",{attrs:{cx:"50",cy:"50",r:"40",fill:"url(#gradient)"}}),n("circle",{attrs:{cx:"50",cy:"50",r:"35",fill:"url(#gradientReversed)"}})]),n("g",t._l(t.ticks,function(t,e){return n("line",{key:e,staticClass:"tickLine",attrs:{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2}})})),n("line",{attrs:{x1:t.line.x1,y1:t.line.y1,x2:t.line.x2,y2:t.line.y2}}),n("defs",[n("linearGradient",{attrs:{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"}},[n("stop",{attrs:{offset:"0%","stop-color":"#447799"}}),n("stop",{attrs:{offset:"50%","stop-color":"#224488"}}),n("stop",{attrs:{offset:"100%","stop-color":"#112266"}})],1),n("linearGradient",{attrs:{id:"gradientReversed",href:"#gradient",gradientTransform:"rotate(180, 0.5, 0.5)"}})],1)])])}),s=[],u=(n("c5f6"),n("53a5")),c=n.n(u),l=function(t){return t/360*Math.PI*2},d={name:"knob",props:{size:{type:Number,default:50},min:{type:Number,default:0},max:{type:Number,default:100},value:{type:Number,default:0},tickCount:{type:Number,default:11}},data:function(){return{currentValue:0}},mounted:function(){this.currentValue=this.value},methods:{pointerDown:function(t){t.target.setPointerCapture(t.pointerId)},pointerUp:function(t){t.target.releasePointerCapture(t.pointerId)},pointerMove:function(t){if(t.target.hasPointerCapture(t.pointerId)){var e=this.currentValue-.5*t.movementY;this.currentValue=c()(e,this.min,this.max)}}},computed:{p:function(t){return t.currentValue/t.max},line:function(){var t=l(225+270*this.p-90);return{x1:50+30*Math.cos(t),y1:50+30*Math.sin(t),x2:50+35*Math.cos(t),y2:50+35*Math.sin(t)}},ticks:function(){for(var t=[],e=0;e<this.tickCount;e++){var n=e/(this.tickCount-1),i=l(225+270*n-90);t.push({x1:50+45*Math.cos(i),y1:50+45*Math.sin(i),x2:50+50*Math.cos(i),y2:50+50*Math.sin(i)})}return t}},watch:{currentValue:function(t,e){this.$emit("input",t)}}},f=d,p=(n("aace"),n("2877")),h=Object(p["a"])(f,a,s,!1,null,"993acdc4",null);h.options.__file="knob.vue";var y=h.exports,v=n("6f79"),k=n.n(v),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none"}},[t._l(12,function(e){return[1,3,5,7,8,10,12].includes(e)?n("rect",{key:"whiteKey"+e,class:["white-key",t.isKeyDown_[12-e+48]?"white-key-down":""],attrs:{"vector-effect":"non-scaling-stroke",x:"1",y:[0,.1,0,12.5,0,29.5,0,46.5,58.5,0,71,0,88][e],height:[0,12.5,0,17,0,17,0,11.75,13,0,17,0,12][e],"data-b":e},on:{pointerdown:function(n){t.keyDown(12-e+48,n)},pointerup:function(n){t.keyUp(12-e+48,n)}}}):t._e()}),t._l(12,function(e){return[2,4,6,9,11].includes(e)?n("rect",{key:"blackKey"+e,class:["black-key",t.isKeyDown_[12-e+48]?"black-key-down":""],attrs:{x:"0",y:100*(e-1)/12,width:"63",height:100/12},on:{pointerdown:function(n){t.keyDown(12-e+48,n)},pointerup:function(n){t.keyUp(12-e+48,n)}}}):t._e()})],2)},w=[],b=(n("14b9"),{});window.addEventListener("keydown",function(t){t.repeat||(b[t.code]||window.dispatchEvent(new CustomEvent("key-event-down-norepeat",{detail:t})),b[t.code]=!0)}),window.addEventListener("keyup",function(t){b[t.code]&&window.dispatchEvent(new CustomEvent("key-event-up",{detail:t})),b[t.code]=!1});var m={KeyZ:36,KeyS:37,KeyX:38,KeyD:39,KeyC:40,KeyV:41,KeyG:42,KeyB:43,KeyH:44,KeyN:45,KeyJ:46,KeyM:47,Comma:48,KeyL:49,Period:50,Semicolon:51,Slash:52,KeyQ:48,Digit2:49,KeyW:50,Digit3:51,KeyE:52,KeyR:53,Digit5:54,KeyT:55,Digit6:56,KeyY:57,Digit7:58,KeyU:59,KeyI:60,Digit9:61,KeyO:62,Digit0:63,KeyP:64,BracketLeft:65,Equal:66,BracketRight:67},_={name:"VueKeyboard",data:function(){return{isKeyDown_:{}}},mounted:function(){var t=this;window.addEventListener("key-event-down-norepeat",function(e){if(e=e.detail,e.code in m){m[e.code],m[e.code];t.keyDown(m[e.code])}}),window.addEventListener("key-event-up",function(e){e=e.detail;m[e.code],m[e.code];t.keyUp(m[e.code])})},methods:{keyDown:function(t,e){e&&e.target.setPointerCapture(e.pointerId);var n={id:"kb"+t,pitch:t};this.$set(this.isKeyDown_,t,!0),this.$emit("noteOn",n)},keyUp:function(t,e){if(e&&e.target.releasePointerCapture(e.pointerId),this.isKeyDown_[t]){var n={id:"kb"+t,pitch:t};this.$set(this.isKeyDown_,t,!1),this.$emit("noteOff",n)}},releaseAllKeys:function(){for(var t in this.isKeyDown_)this.$set(this.isKeyDown_,t,!1)}}},x=_,O=(n("cd3d"),Object(p["a"])(x,g,w,!1,null,"10143a82",null));O.options.__file="keyboard.vue";var K=O.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none"}},[t._l(4,function(t){return n("rect",{key:"bgrect"+t,class:(t-1)%2==0?"bg1":"bg2",attrs:{x:25*(t-1),width:"25",y:"0",height:"100%"}})}),t._l(12,function(e){return[2,4,6,9,11].includes(e)?n("rect",{key:"whiteBlackRect"+e,staticClass:"blackKeyGrid",attrs:{x:0,width:"100%",y:100*(e-1)/12,height:"8.33%"}}):t._e()}),t._l(192,function(e,i){return n("rect",{key:"emptyrect"+i,staticClass:"note note-empty",attrs:{x:6.25*Math.floor(i%16),width:6.25,y:Math.floor(i/16)*(100/12),height:100/12,"stroke-width":"0.1"},on:{mousedown:function(e){t.placeNote(Math.floor(i%16),Math.floor(i/16))}}})}),t._l(t.notes,function(e){return n("rect",{key:"note"+e.pitch+"-"+e.startTick,staticClass:"note note-placed",attrs:{x:e.startTick/t.totalTicks_*100+"%",width:"6.25%",y:(11-(e.pitch-60))*(1/12)*100+"%",height:1/12*100+"%","stroke-width":"0.1"},on:{mousedown:function(n){t.removeNote(e)}}})}),t._l(4,function(t){return n("path",{key:"outline"+t,staticClass:"line-outline",attrs:{d:"M25 0 L0 0 0 100",transform:"translate("+25*(t-1)+",0)","vector-effect":"non-scaling-stroke"}})}),n("path",{staticClass:"line-outline",attrs:{d:"M100 0 L100 100 0 100","vector-effect":"non-scaling-stroke"}}),n("path",{staticClass:"line-outline",attrs:{d:"M0 "+100/12*7+" L100 "+100/12*7,"vector-effect":"non-scaling-stroke"}}),t.playing?n("line",{attrs:{x1:100*t.tickP,y1:"0",x2:100*t.tickP,y2:"100%","stroke-width":"0.2",stroke:"yellow"}}):t._e()],2)},D=[],P=(n("20d6"),function(){var t=0;return function(){return t++}}()),T={name:"VueSequencer",props:{width:{type:Number,default:800},height:{type:Number,default:400}},data:function(){return{notes:[],position:0,playmarkerPosition_:0,playing:!1,totalTicks_:256}},mounted:function(){window.setInterval(this.update_,8),this.updateVisuals_()},methods:{update_:function(){var t=this;this.playing&&(this.notes.forEach(function(e){t.position==e.startTick&&t.$emit("noteOn",e),t.position==e.endTick&&t.$emit("noteOff",e)}),this.position+=1,this.position%=this.totalTicks_)},updateVisuals_:function(){this.playmarkerPosition_=this.position,window.requestAnimationFrame(this.updateVisuals_)},placeNote:function(t,e){var n=16*t,i=n+16;this.notes.findIndex(function(t){return t.startTick===n});this.notes.push({id:P(),pitch:11-e+60,startTick:n,endTick:i})},removeNote:function(t){var e=this.notes.indexOf(t);this.notes.splice(e,1)},stop:function(){this.position=0,this.playing=!1},resume:function(){this.playing=!0}},computed:{tickP:function(t){return t.playmarkerPosition_/t.totalTicks_}}},q=T,M=(n("ed37"),Object(p["a"])(q,C,D,!1,null,"211f3a13",null));M.options.__file="sequencer.vue";var N=M.exports,E=n("c93e"),j={tooltip:!1},A={horizontal:Object(E["a"])({},j,{width:200,height:5}),verticalASDR:Object(E["a"])({},j,{direction:"vertical",width:5,height:100,tooltip:"hover","tooltip-dir":"top"})},S=n("c665"),$=n("dc0a"),R=n("aa9a"),V=n("d328"),L=n("11d9"),I=function(){function t(){Object(S["a"])(this,t),this.lookup={}}return Object(R["a"])(t,[{key:"addEventListener",value:function(t,e){t in this.lookup?e in this.lookup[t]||this.lookup[t].push(e):this.lookup[t]=[e]}},{key:"removeEventListener",value:function(t,e){if(t in this.lookup){var n=this.lookup[t].findIndex(function(t){return t===e});n>=0&&this.lookup[t].splice(n,1)}}},{key:"dispatchEvent",value:function(t,e){t in this.lookup&&this.lookup[t].forEach(function(t){t(e)})}}]),t}(),z=function(){for(var t=[],e=0;e<127;++e)t[e]=13.75*Math.pow(2,(e-9)/12);return function(e){return t[e]}}(),B={sine:"sine",square:"square",sawtooth:"sawtooth",triangle:"triangle"},F=function(t){function e(t){var n;return Object(S["a"])(this,e),n=Object(V["a"])(this,Object(L["a"])(e).call(this)),n.audioCtx=t,n.oscillatorNode=t.createOscillator(),n.biquadFilter=t.createBiquadFilter(),n.gainNode=t.createGain(),n.oscillatorNode.type=B.sawtooth,n.oscillatorNode.connect(n.biquadFilter),n.biquadFilter.type="lowpass",n.biquadFilter.frequency.setValueAtTime(2e4,t.currentTime),n.biquadFilter.connect(n.gainNode),n.gainNode.gain.value=.2,n.gainNode.connect(n.audioCtx.destination),n}return Object(R["a"])(e,[{key:"noteOn",value:function(t){this.oscillatorNode.frequency.value=z(t),this.oscillatorNode.start(this.audioCtx.currentTime),this.biquadFilter.frequency.exponentialRampToValueAtTime(1e3,this.audioCtx.currentTime+1)}},{key:"noteOff",value:function(){var t=this;this.gainNode.gain.setValueAtTime(this.gainNode.gain.value,this.audioCtx.currentTime),this.gainNode.gain.exponentialRampToValueAtTime(1e-7,this.audioCtx.currentTime+.03),window.setTimeout(function(){t.dispatchEvent("voiceDonePlaying")},50)}}]),Object($["a"])(e,t),e}(I),U=new AudioContext,G={},J=(function(){var t=0}(),{name:"app",components:{knob:y,vueSlider:k.a,vueKeyboard:K,vueSequencer:N},data:function(){return{sliderConfig:A}},mounted:function(){},methods:{noteOn:function(t,e){var n=t.pitch,i=t.id;if("sq"===e)this.$refs.keyboard.keyDown(n-12);else{var o=new F(U);i in G?G[i].push(o):G[i]=[o],o.noteOn(n),o.addEventListener("voiceDonePlaying",function(){})}},noteOff:function(t,e){var n=t.pitch,i=t.id;if("sq"===e)this.$refs.keyboard.keyUp(n-12);else if(i in G){var o=G[i].pop();o.noteOff()}},togglePlaying:function(){this.$refs.sequencer.playing?(this.$refs.sequencer.stop(),this.$refs.keyboard.releaseAllKeys(),Object.values(G).forEach(function(t){t.forEach(function(t){return t.noteOff()}),t.length=0})):this.$refs.sequencer.resume()}}}),W=J,Y=(n("5c0b"),Object(p["a"])(W,o,r,!1,null,null,null));Y.options.__file="App.vue";var H=Y.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(H)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var i=n("2856"),o=n.n(i);o.a},7679:function(t,e,n){},"7ecf":function(t,e,n){},9956:function(t,e,n){},aace:function(t,e,n){"use strict";var i=n("7679"),o=n.n(i);o.a},cd3d:function(t,e,n){"use strict";var i=n("7ecf"),o=n.n(i);o.a},ed37:function(t,e,n){"use strict";var i=n("9956"),o=n.n(i);o.a}});
//# sourceMappingURL=app.721e15e7.js.map