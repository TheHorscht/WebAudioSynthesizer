(function(e){function t(t){for(var i,s,a=t[0],c=t[1],u=t[2],h=0,f=[];h<a.length;h++)s=a[h],o[s]&&f.push(o[s][0]),o[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var c=n[a];0!==o[c]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={app:0},r=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/WebAudioSynthesizer/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1440:function(e,t){document.documentElement.setAttribute("data-browser",navigator.userAgent)},"1c69":function(e,t,n){"use strict";var i=n("8b45"),o=n.n(i);o.a},2856:function(e,t,n){},5263:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var i=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e._l(e.oscillators,function(t,i){return n("fieldset",{key:"oscillator"+i,staticClass:"oscillator-container"},[n("legend",[e._v("OSC "+e._s(i+1))]),n("label",[e._v("\n      Active\n      "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.active,expression:"osc.active"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.active)?e._i(t.active,null)>-1:t.active},on:{change:function(n){var i=t.active,o=n.target,r=!!o.checked;if(Array.isArray(i)){var s=null,a=e._i(i,s);o.checked?a<0&&e.$set(t,"active",i.concat([s])):a>-1&&e.$set(t,"active",i.slice(0,a).concat(i.slice(a+1)))}else e.$set(t,"active",r)}}})]),n("label",[e._v("\n      Shape\n      "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.shape,expression:"osc.shape"}],on:{change:function(n){var i=Array.prototype.filter.call(n.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(t,"shape",n.target.multiple?i:i[0])}}},e._l(e.SHAPES,function(t){return n("option",{key:t,domProps:{value:t}},[e._v("\n          "+e._s(t)+"\n        ")])}))]),n("label",[e._v("\n      Voices\n      "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.voices,expression:"osc.voices"}],on:{change:function(n){var i=Array.prototype.filter.call(n.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(t,"voices",n.target.multiple?i:i[0])}}},e._l(8,function(t){return n("option",{key:"voiceSelect"+t,domProps:{value:t}},[e._v("\n          "+e._s(t)+"\n        ")])}))]),n("label",[e._v("\n      Detune\n      "),n("vue-slider",e._b({attrs:{min:0,max:1200},model:{value:t.detune,callback:function(n){e.$set(t,"detune",n)},expression:"osc.detune"}},"vue-slider",e.sliderConfig.horizontal,!1))],1),n("label",[e._v("\n      Octave\n      "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.octave,expression:"osc.octave"}],on:{change:function(n){var i=Array.prototype.filter.call(n.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(t,"octave",n.target.multiple?i:i[0])}}},e._l(5,function(t){return n("option",{key:"octaveSelect"+t,domProps:{value:t-3}},[t-3>0?[e._v("+")]:e._e(),e._v("\n          "+e._s(t-3)+"\n        ")],2)}))]),n("label",[e._v("\n      Pitch\n      "),n("select",{directives:[{name:"model",rawName:"v-model",value:t.pitch,expression:"osc.pitch"}],on:{change:function(n){var i=Array.prototype.filter.call(n.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(t,"pitch",n.target.multiple?i:i[0])}}},e._l(25,function(t){return n("option",{key:"pitchSelect"+t,domProps:{value:t-13}},[t-13>0?[e._v("+")]:e._e(),e._v("\n          "+e._s(t-13)+"\n        ")],2)}))]),n("label",[e._v("\n      Volume\n      "),n("vue-slider",e._b({attrs:{interval:.001,min:0,max:1},model:{value:t.volume,callback:function(n){e.$set(t,"volume",n)},expression:"osc.volume"}},"vue-slider",e.sliderConfig.horizontal,!1))],1)])}),n("fieldset",[n("legend",[e._v("Filter")]),n("div",{staticClass:"filter-envelope-container"},[n("knob",{attrs:{size:75,label:"Cutoff",min:5,max:22e3,scale:"log"},model:{value:e.filterCutoff,callback:function(t){e.filterCutoff=t},expression:"filterCutoff"}}),n("knob",{attrs:{size:75,label:"Resonance",min:0,max:10},model:{value:e.filterResonance,callback:function(t){e.filterResonance=t},expression:"filterResonance"}}),n("vue-slider",e._b({attrs:{min:0,max:1,interval:.01},model:{value:e.filterEnvelopeAmount,callback:function(t){e.filterEnvelopeAmount=t},expression:"filterEnvelopeAmount"}},"vue-slider",e.sliderConfig.verticalADSR,!1)),n("vue-slider",e._b({attrs:{min:0,max:1,interval:.01},model:{value:e.filterA,callback:function(t){e.filterA=t},expression:"filterA"}},"vue-slider",e.sliderConfig.verticalADSR,!1)),n("vue-slider",e._b({attrs:{min:0,max:1,interval:.01},model:{value:e.filterD,callback:function(t){e.filterD=t},expression:"filterD"}},"vue-slider",e.sliderConfig.verticalADSR,!1)),n("vue-slider",e._b({attrs:{min:0,max:1,interval:.01},model:{value:e.filterS,callback:function(t){e.filterS=t},expression:"filterS"}},"vue-slider",e.sliderConfig.verticalADSR,!1)),n("vue-slider",e._b({attrs:{min:.01,max:1,interval:.01},model:{value:e.filterR,callback:function(t){e.filterR=t},expression:"filterR"}},"vue-slider",e.sliderConfig.verticalADSR,!1)),n("span",[e._v("Env")]),n("span",[e._v("A")]),n("span",[e._v("D")]),n("span",[e._v("S")]),n("span",[e._v("R")])],1)]),n("fieldset",[n("legend",[e._v("Amplitude")]),n("div",{staticClass:"ASDR-container"},[n("vue-slider",e._b({attrs:{min:0,max:1,interval:.01},model:{value:e.volumeA,callback:function(t){e.volumeA=t},expression:"volumeA"}},"vue-slider",e.sliderConfig.verticalADSR,!1)),n("vue-slider",e._b({attrs:{min:0,max:1,interval:.01},model:{value:e.volumeD,callback:function(t){e.volumeD=t},expression:"volumeD"}},"vue-slider",e.sliderConfig.verticalADSR,!1)),n("vue-slider",e._b({attrs:{min:0,max:1,interval:.01},model:{value:e.volumeS,callback:function(t){e.volumeS=t},expression:"volumeS"}},"vue-slider",e.sliderConfig.verticalADSR,!1)),n("vue-slider",e._b({attrs:{min:.01,max:1,interval:.01},model:{value:e.volumeR,callback:function(t){e.volumeR=t},expression:"volumeR"}},"vue-slider",e.sliderConfig.verticalADSR,!1)),n("span",[e._v("A")]),n("span",[e._v("D")]),n("span",[e._v("S")]),n("span",[e._v("R")])],1)]),n("div",[n("vue-slider",e._b({attrs:{min:0,max:.5,interval:.01},model:{value:e.volume,callback:function(t){e.volume=t},expression:"volume"}},"vue-slider",e.sliderConfig.horizontal,!1)),e._v("\n    Volume: "+e._s(e.volume)+"\n    "),n("vue-slider",e._b({attrs:{min:80,max:200},model:{value:e.bpm,callback:function(t){e.bpm=t},expression:"bpm"}},"vue-slider",e.sliderConfig.horizontal,!1)),e._v("\n    BPM: "+e._s(e.bpm)+"\n  ")],1),n("div",{staticClass:"kb-and-sequencer"},[n("vue-keyboard",{ref:"keyboard",attrs:{octaveStart:e.verticalLow,octaveEnd:e.verticalHigh},on:{noteOn:e.onKeyboardNoteOn,noteOff:e.onKeyboardNoteOff}}),n("zoom-scrollbar",{attrs:{orientation:"horizontal",min:0,max:4,low:e.horizontalLow,high:e.horizontalHigh},on:{lowChanged:e.onScrollHorizontalLowChanged,highChanged:e.onScrollHorizontalHighChanged}}),n("zoom-scrollbar",{attrs:{orientation:"vertical",min:2,max:8,low:e.verticalLow,high:e.verticalHigh,reverse:!0},on:{lowChanged:e.onScrollVerticalLowChanged,highChanged:e.onScrollVerticalHighChanged}}),n("vue-sequencer",{ref:"sequencer",attrs:{audioContext:e.audioCtx,bpm:e.bpm,viewportStart:e.horizontalLow,viewportEnd:e.horizontalHigh,octaveStart:e.verticalLow,octaveEnd:e.verticalHigh},on:{noteOn:e.onSequencerNoteOn,noteOff:e.onSequencerNoteOff,stop:e.onSequencerStop}})],1),n("input",{attrs:{type:"button",value:"Play/Pause"},on:{click:e.togglePlaying}}),n("input",{attrs:{type:"button",value:"Export"},on:{click:e.exportNotes}}),n("input",{attrs:{type:"button",value:"Import"},on:{click:e.importNotes}}),n("input",{attrs:{type:"button",value:"Test"},on:{click:e.test}})],2)},r=[],s=(n("8615"),n("ac6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("svg",{attrs:{width:e.size,height:e.size,viewBox:"0 0 100 100",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[n("g",{on:{pointerdown:function(t){return t.stopPropagation(),e.pointerDown(t)},pointerup:function(t){return t.stopPropagation(),e.pointerUp(t)},pointermove:function(t){return t.stopPropagation(),e.pointerMove(t)}}},[n("circle",{attrs:{cx:"50",cy:"50",r:"40",fill:"url(#gradient)"}}),n("circle",{attrs:{cx:"50",cy:"50",r:"35",fill:"url(#gradientReversed)"}})]),n("g",e._l(e.ticks,function(e,t){return n("line",{key:t,staticClass:"tickLine",attrs:{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}})})),n("line",{attrs:{x1:e.line.x1,y1:e.line.y1,x2:e.line.x2,y2:e.line.y2}}),n("defs",[n("linearGradient",{attrs:{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%"}},[n("stop",{attrs:{offset:"0%","stop-color":"#447799"}}),n("stop",{attrs:{offset:"50%","stop-color":"#224488"}}),n("stop",{attrs:{offset:"100%","stop-color":"#112266"}})],1),n("linearGradient",{attrs:{id:"gradientReversed",href:"#gradient",gradientTransform:"rotate(180, 0.5, 0.5)"}})],1)]),n("label",[e._v(e._s(e.label))])])}),a=[],c=(n("c5f6"),n("53a5")),u=n.n(c),l=function(e){return e/360*Math.PI*2},h={linear:{toValue:function(e,t,n){return t+(n-t)*e},fromValue:function(e,t,n){return(e-t)/(n-t)}},log:{toValue:function(e,t,n){return Math.pow(n-t-1,e)+t-1},fromValue:function(e,t,n){return Math.log(e-t+1)/Math.log(n-t+1)}}},f={name:"knob",props:{size:{type:Number,default:50},min:{type:Number,default:0},max:{type:Number,default:100},value:{type:Number,default:0},label:{type:String,default:""},scale:{type:String,default:"linear",validator:function(e){return-1!==["linear","log"].indexOf(e)}},tickCount:{type:Number,default:11}},data:function(){return{}},mounted:function(){},methods:{pointerDown:function(e){e.target.setPointerCapture(e.pointerId)},pointerUp:function(e){e.target.releasePointerCapture(e.pointerId)},pointerMove:function(e){if(e.target.hasPointerCapture(e.pointerId)){var t=h[this.scale].toValue(this.knobPosition-.005*e.movementY,this.min,this.max);t=u()(t,this.min,this.max),this.$emit("input",t)}}},computed:{line:function(){var e=l(225+270*this.knobPosition-90);return{x1:50+30*Math.cos(e),y1:50+30*Math.sin(e),x2:50+35*Math.cos(e),y2:50+35*Math.sin(e)}},ticks:function(){for(var e=[],t=0;t<this.tickCount;t++){var n=t/(this.tickCount-1),i=l(225+270*n-90);e.push({x1:50+45*Math.cos(i),y1:50+45*Math.sin(i),x2:50+50*Math.cos(i),y2:50+50*Math.sin(i)})}return e},knobPosition:function(e){return h[e.scale].fromValue(e.value,e.min,e.max)}}},v=f,d=(n("ebc8"),n("2877")),p=Object(d["a"])(v,s,a,!1,null,"693f9299",null);p.options.__file="knob.vue";var m=p.exports,b=n("6f79"),g=n.n(b),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none"}},[e._l(96,function(t){return e.isWhiteKey(t)&&e.isWhiteKeyVisible(t)?n("rect",{key:"whiteKey"+t,class:["white-key",e.isKeyDown_[t-1]?"white-key-down":""],attrs:{"vector-effect":"non-scaling-stroke",x:"0",width:"100",y:100-e.whiteKeyYPositionsAbsolute[t-1]+e.octaveStart*(100/e.numOctavesVisibleInViewport),height:e.whiteKeyHeights_[(t-1)%12]/e.numOctavesVisibleInViewport,"data-b":"i: "+t+", "},on:{pointerdown:function(n){e.keyDown(t-1,!0,n)},pointerup:function(n){e.keyUp(t-1,!0,n)}}}):e._e()}),e._l(96,function(t){return e.isBlackKey(t)&&e.isBlackKeyVisible(t)?n("rect",{key:"blackKey"+t,class:["black-key",e.isKeyDown_[t-1]?"black-key-down":""],attrs:{x:"0",width:"63",y:100-e.blackKeyYPositionsAbsolute[t-1]+e.octaveStart*(100/e.numOctavesVisibleInViewport),height:e.blackKeyHeights_[(t-1)%12]/e.numOctavesVisibleInViewport,"data-b":"i: "+t+", "},on:{pointerdown:function(n){e.keyDown(t-1,!0,n)},pointerup:function(n){e.keyUp(t-1,!0,n)}}}):e._e()})],2)},w=[],x=(n("6762"),n("2fdb"),n("8afe")),k=(n("6c7b"),n("14b9"),{});window.addEventListener("keydown",function(e){e.repeat||(k[e.code]||window.dispatchEvent(new CustomEvent("key-event-down-norepeat",{detail:e})),k[e.code]=!0)}),window.addEventListener("keyup",function(e){k[e.code]&&window.dispatchEvent(new CustomEvent("key-event-up",{detail:e})),k[e.code]=!1});n("1440");var S={KeyZ:36,KeyS:37,KeyX:38,KeyD:39,KeyC:40,KeyV:41,KeyG:42,KeyB:43,KeyH:44,KeyN:45,KeyJ:46,KeyM:47,Comma:48,KeyL:49,Period:50,Semicolon:51,Slash:52,KeyQ:48,Digit2:49,KeyW:50,Digit3:51,KeyE:52,KeyR:53,Digit5:54,KeyT:55,Digit6:56,KeyY:57,Digit7:58,KeyU:59,KeyI:60,Digit9:61,KeyO:62,Digit0:63,KeyP:64,BracketLeft:65,Equal:66,BracketRight:67},O={name:"VueKeyboard",props:{octaveStart:{type:Number,default:0},octaveEnd:{type:Number,default:2}},data:function(){return{isKeyDown_:{},whiteKeyHeights_:[12.285,0,17.285,0,12.1,12.285,0,16.285,0,16.285,0,13.475],blackKeyHeights_:Array(12).fill(100/12)}},computed:{numOctavesVisibleInViewport:function(e){return e.octaveEnd-e.octaveStart},numKeysVisibleInViewport:function(e){return 12*e.numOctavesVisibleInViewport},keyOffset:function(e){return e.octaveStart%1*12},whiteKeyYPositions:function(e){var t=0;return e.whiteKeyHeights_.map(function(e){return t+=e,t})},whiteKeyYPositionsAbsolute:function(e){for(var t=[],n=function(n){t.push.apply(t,Object(x["a"])(e.whiteKeyYPositions.map(function(t){return t/e.numOctavesVisibleInViewport+n*(100/e.numOctavesVisibleInViewport)})))},i=0;i<8;i++)n(i);return t},blackKeyYPositions:function(e){var t=0;return e.blackKeyHeights_.map(function(e){return t+=e,t})},blackKeyYPositionsAbsolute:function(e){for(var t=[],n=function(n){t.push.apply(t,Object(x["a"])(e.blackKeyYPositions.map(function(t){return t/e.numOctavesVisibleInViewport+n*(100/e.numOctavesVisibleInViewport)})))},i=0;i<8;i++)n(i);return t}},mounted:function(){var e=this;window.shit=this,window.addEventListener("key-event-down-norepeat",function(t){if(t=t.detail,t.code in S){S[t.code],S[t.code];e.keyDown(S[t.code],!0)}}),window.addEventListener("key-event-up",function(t){t=t.detail;S[t.code],S[t.code];e.keyUp(S[t.code],!0)})},methods:{keyDown:function(e,t,n){n&&n.target.setPointerCapture(n.pointerId);var i={id:"kb"+e,pitch:e};t&&!this.isKeyDown_[e]&&this.$emit("noteOn",i),this.$set(this.isKeyDown_,e,!0)},keyUp:function(e,t,n){if(n&&n.target.releasePointerCapture(n.pointerId),this.isKeyDown_[e]){var i={id:"kb"+e,pitch:e};t&&this.isKeyDown_[e]&&this.$emit("noteOff",i),this.$set(this.isKeyDown_,e,!1)}},releaseAllKeys:function(){for(var e in this.isKeyDown_)this.$set(this.isKeyDown_,e,!1)},isWhiteKeyVisible:function(e){return e>12*this.octaveStart-1&&e<12*this.octaveEnd+2},isWhiteKey:function(e){return[1,3,5,6,8,10,12].includes((e-1)%12+1)},isBlackKeyVisible:function(e){return e>12*this.octaveStart-1&&e<12*this.octaveEnd+2},isBlackKey:function(e){return[2,4,7,9,11].includes((e-1)%12+1)}}},_=O,C=(n("1c69"),Object(d["a"])(_,y,w,!1,null,"0c57185e",null));C.options.__file="keyboard.vue";var A=C.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("svg",{attrs:{width:"100%",height:"100%",viewBox:"0 0 100 100",preserveAspectRatio:"none"},on:{pointerdown:function(t){return t.preventDefault(),e.onPointerDown(t)},pointerup:function(t){return t.preventDefault(),e.onPointerUp(t)},pointermove:function(t){return t.preventDefault(),e.onPointerMove(t)},contextmenu:function(e){e.preventDefault()}}},[e._l(Math.ceil(4*e.numBarsVisibleInViewport+1),function(t){return n("rect",{key:"bgrect"+t,class:(t-1)%2===Math.floor(e.viewportStart%.5*4)?"bg1":"bg2",attrs:{x:(t-1)*e.noteWidth*4-e.viewportStart%.25*e.noteWidth*16,width:4*e.noteWidth,y:"0",height:"100%"}})}),e._l(Math.ceil(12*e.numOctavesVisibleInViewport)+13,function(t){return[2,4,7,9,11].includes((t-1)%12)?n("rect",{key:"whiteBlackRect"+t,staticClass:"blackKeyGrid",attrs:{x:0,width:"100",y:100-(t-1)*e.noteHeight+e.octaveStart%1*e.noteHeight*12,height:e.noteHeight}}):e._e()}),e._l(Math.ceil(16*e.numBarsVisibleInViewport+1),function(t){return n("line",{key:"noteLineX"+t,staticClass:"note-line",attrs:{x1:(t-1)*e.noteWidth-e.viewportStart%(1/16)*e.noteWidth*16,x2:(t-1)*e.noteWidth-e.viewportStart%(1/16)*e.noteWidth*16,y1:"0",y2:"100","vector-effect":"non-scaling-stroke"}})}),e._l(Math.ceil(12*e.numOctavesVisibleInViewport+1),function(t){return n("line",{key:"noteLineY"+t,staticClass:"note-line",attrs:{x1:"0",x2:"100",y1:100-(t-1)*e.noteHeight+e.octaveStart%(1/12)*e.noteHeight*12,y2:100-(t-1)*e.noteHeight+e.octaveStart%(1/12)*e.noteHeight*12,"vector-effect":"non-scaling-stroke"}})}),e._l(Math.ceil(4*e.numBarsVisibleInViewport+1),function(t){return n("path",{key:"outline1"+t,staticClass:"beat-line",attrs:{d:"M0 0 L0 100",transform:"translate("+((t-1)*e.noteWidth*4-e.viewportStart%.25*e.noteWidth*16)+", 0)","vector-effect":"non-scaling-stroke"}})}),e._l(Math.ceil(e.numBarsVisibleInViewport+1),function(t){return n("line",{key:"barLineX"+t,staticClass:"bar-line",attrs:{x1:(t-1)*e.noteWidth*16-e.viewportStart%1*e.noteWidth*16,x2:(t-1)*e.noteWidth*16-e.viewportStart%1*e.noteWidth*16,y1:"0",y2:"100","vector-effect":"non-scaling-stroke"}})}),e._l(Math.ceil(e.numOctavesVisibleInViewport)+1,function(t){return[n("line",{key:"eToFSeparator"+t,staticClass:"e-to-f-line",attrs:{x1:"0",x2:"100",y1:100-5*e.noteHeight*t-(t-1)*e.noteHeight*7+e.octaveStart%1*e.noteHeight*12,y2:100-5*e.noteHeight*t-(t-1)*e.noteHeight*7+e.octaveStart%1*e.noteHeight*12,"vector-effect":"non-scaling-stroke"}}),n("line",{key:"octaveSeparator"+t,staticClass:"octave-line",attrs:{x1:"0",x2:"100",y1:100-12*e.noteHeight*t+e.octaveStart%1*e.noteHeight*12,y2:100-12*e.noteHeight*t+e.octaveStart%1*e.noteHeight*12,"vector-effect":"non-scaling-stroke"}})]}),e._l(e.notes,function(t,i){return n("g",{key:"note-"+i},[n("rect",{class:["note","note-placed",t.selected?"note-selected":""],attrs:{width:e.barWidth*t.duration,height:e.noteHeight,x:t.x*e.noteWidth-e.viewportStart*e.noteWidth*16,y:100-(t.y+1)*e.noteHeight+e.octaveStart*e.noteHeight*12,"stroke-width":"0.1"},on:{pointerdown:[function(n){n.stopPropagation(),e.onPointerDown(n,t)},function(n){return"button"in n||!e._k(n.keyCode,"right",39,n.key,["Right","ArrowRight"])?(n.stopPropagation(),"button"in n&&2!==n.button?null:void e.removeNote(t)):null}],pointerup:function(n){n.stopPropagation(),e.onPointerUp(n,t)},"!pointermove":function(n){e.onPointerMove(n,t)}}}),n("rect",{staticClass:"note-resize-handle",attrs:{width:1,height:e.noteHeight,x:t.x*e.noteWidth-e.viewportStart*e.noteWidth*16+e.barWidth*t.duration-.75,y:100-(t.y+1)*e.noteHeight+e.octaveStart*e.noteHeight*12},on:{pointerdown:function(n){return"button"in n||!e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])?"button"in n&&0!==n.button?null:(n.stopPropagation(),void e.onResizeNoteStart(n,t)):null},pointerup:function(n){return"button"in n||!e._k(n.keyCode,"left",37,n.key,["Left","ArrowLeft"])?"button"in n&&0!==n.button?null:(n.stopPropagation(),void e.onResizeNoteEnd(n,t)):null},pointermove:function(n){n.stopPropagation(),e.onResizeNote(n,t)}}})])}),e.selecting?n("rect",{staticClass:"selection-rectangle",attrs:{x:(e.selection.left-16*e.viewportStart)/16*100/e.numBarsVisibleInViewport,y:100-(e.selection.bottom-12*e.octaveStart)/12*100/e.numOctavesVisibleInViewport,width:e.selection.width/16*100/e.numBarsVisibleInViewport,height:e.selection.height/12*100/e.numOctavesVisibleInViewport,"vector-effect":"non-scaling-stroke"}}):e._e(),e.playing?n("line",{attrs:{x1:100*e.playheadPosition,y1:"0",x2:100*e.playheadPosition,y2:"100","stroke-width":"0.2",stroke:"yellow"}}):e._e()],2)},P=[],D=n("c93e"),V=n("c665"),R=n("aa9a"),E=function(){function e(t,n){Object(V["a"])(this,e),this.start={x:t,y:n},this.end={x:t,y:n}}return Object(R["a"])(e,[{key:"left",get:function(){return Math.min(this.start.x,this.end.x)}},{key:"top",get:function(){return Math.min(this.start.y,this.end.y)}},{key:"right",get:function(){return Math.max(this.start.x,this.end.x)}},{key:"bottom",get:function(){return Math.max(this.start.y,this.end.y)}},{key:"width",get:function(){return this.right-this.left}},{key:"height",get:function(){return this.bottom-this.top}}]),e}();window.sr=E;var T={LEFT_MOUSE:0,RIGHT_MOUSE:2},M=function(){var e=0;return function(){return"sq"+e++}}(),K=0,H=0,I={name:"VueSequencer",props:{audioContext:{type:AudioContext,required:!0},bpm:{type:Number,default:120,required:!0},viewportStart:{type:Number,default:0},viewportEnd:{type:Number,default:2},octaveStart:{type:Number,default:0},octaveEnd:{type:Number,default:2}},data:function(){return{notes:[],sequencePosition:0,sequenceCurrentLoop:0,playing:!1,lookahead:.1,notesInHand:[],selection:new E(0,0),selecting:!1,width:1,height:1,previewNote:null,lastTouchedNote:{duration:1/16}}},computed:{playheadPosition:function(e){return(e.sequencePosition/e.totalBars-e.viewportStart/e.totalBars)/e.numBarsVisibleInViewport*e.totalBars},secondsPerSixteenthNote:function(e){return 60/e.bpm/4},secondsPerBar:function(e){return 16*e.secondsPerSixteenthNote},sequenceDuration:function(e){return e.secondsPerBar*e.totalBars},totalBars:function(e){return 4},numOctavesVisibleInViewport:function(e){return e.octaveEnd-e.octaveStart},numBarsVisibleInViewport:function(e){return e.viewportEnd-e.viewportStart},barWidth:function(e){return 100/e.numBarsVisibleInViewport},noteWidth:function(e){return 100/(16*e.numBarsVisibleInViewport)},noteHeight:function(e){return 100/(12*e.numOctavesVisibleInViewport)}},mounted:function(){var e=this;this.$nextTick(function(){e.width=parseInt(window.getComputedStyle(e.$el).width,10),e.height=parseInt(window.getComputedStyle(e.$el).height,10)}),window.addEventListener("key-event-down-norepeat",function(t){e.onKeyDown(t.detail)}),this.update_()},methods:{update_:function(){var e=this;if(this.playing){var t=this.getUpcomingEvents(this.sequencePosition*this.secondsPerBar,this.lookahead);t.on.forEach(function(t){var n=t.x*e.secondsPerSixteenthNote,i=n+e.sequenceDuration*t.onTriggerCount;i+=H,t.onTriggerCount++,e.$emit("noteOn",{note:t,whenTime:i})}),t.off.forEach(function(t){var n=t.x*e.secondsPerSixteenthNote+16*e.secondsPerSixteenthNote*t.duration,i=n+e.sequenceDuration*t.offTriggerCount;i+=H,t.offTriggerCount++,e.$emit("noteOff",{note:t,whenTime:i})});var n=this.audioContext.currentTime-K;K=this.audioContext.currentTime,this.sequencePosition+=n/this.secondsPerBar,this.sequencePosition>this.totalBars&&(this.sequencePosition-=this.totalBars,this.sequenceCurrentLoop++)}window.requestAnimationFrame(this.update_)},placeNote:function(e,t){var n=e/16>this.sequencePosition?0:1,i={id:M(),pitch:t,x:e,y:t,fineX:e,fineY:t,duration:this.lastTouchedNote.duration,selected:!1,onTriggerCount:this.sequenceCurrentLoop+n,offTriggerCount:this.sequenceCurrentLoop+n};return this.notes.push(i),i},removeNote:function(e){var t=this.notes.indexOf(e);this.notes.splice(t,1)},getUpcomingEvents:function(e,t){var n=this,i={on:[],off:[]},o=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{on:n.notes.filter(function(o){var r=o.x*n.secondsPerSixteenthNote;return r>=e&&r<=t&&o.onTriggerCount===n.sequenceCurrentLoop+i}),off:n.notes.filter(function(o){var r=o.x*n.secondsPerSixteenthNote+n.secondsPerSixteenthNote;return r>=e&&r<=t&&o.offTriggerCount===n.sequenceCurrentLoop+i})}},r=e+t-this.sequenceDuration;if(r>0){var s,a,c,u,l=o(e,this.sequenceDuration),h=o(0,r,1);(s=i.on).push.apply(s,Object(x["a"])(l.on)),(a=i.on).push.apply(a,Object(x["a"])(h.on)),(c=i.off).push.apply(c,Object(x["a"])(l.off)),(u=i.off).push.apply(u,Object(x["a"])(h.off))}else{var f,v,d=o(e,e+t);(f=i.on).push.apply(f,Object(x["a"])(d.on)),(v=i.off).push.apply(v,Object(x["a"])(d.off))}return i},play:function(){this.stop(),this.playing=!0,H=this.audioContext.currentTime,K=this.audioContext.currentTime},stop:function(){this.sequencePosition=0,this.sequenceCurrentLoop=0,this.playing=!1,this.notes.forEach(function(e){e.onTriggerCount=0,e.offTriggerCount=0}),this.$emit("stop")},resume:function(){this.playing=!0},onPointerDown:function(e,t){var n=this;if(e.button===T.LEFT_MOUSE){if(this.$el.setPointerCapture(e.pointerId),e.ctrlKey){var i=this.coordsToNote(e.offsetX,e.offsetY),o=i.xFine,r=i.yFine;this.selection=new E(o,r),this.selecting=!0}else if(e.shiftKey){var s=this.notes.filter(function(e){return e.selected});this.notesInHand=[],s.forEach(function(e){var t=Object(D["a"])({},e,{id:M()});n.notes.push(t),n.notesInHand.push(t),e.selected=!1})}else if(t){var a;this.notesInHand=[t],(a=this.notesInHand).push.apply(a,Object(x["a"])(this.notes.filter(function(e){return!0===e.selected&&t!==e}))),1===this.notesInHand.length&&this.emitPreviewOn(t.pitch)}else{var c=this.coordsToNote(e.offsetX,e.offsetY),u=c.x,l=c.y,h=this.placeNote(u,l);this.notesInHand.push(h),1===this.notesInHand.length&&this.emitPreviewOn(h.pitch),this.deselectAllNotes()}t&&(this.lastTouchedNote.duration=t.duration)}else e.button===T.RIGHT_MOUSE&&this.notes.forEach(function(e){return e.selected=!1})},onPointerUp:function(e,t){var n=this;if(this.$el.releasePointerCapture(e.pointerId),e.button===T.LEFT_MOUSE){var i=this.coordsToNote(e.offsetX,e.offsetY);i.x,i.y;this.notes.forEach(function(e){n.selecting&&!(e.fineX<n.selection.left||e.fineX>n.selection.right||e.fineY<n.selection.top||e.fineY>n.selection.bottom)&&(e.selected=!0)}),this.notesInHand.forEach(function(e){e.fineX=e.x,e.fineY=e.y}),this.notesInHand=[],this.emitPreviewOff()}this.selecting=!1},onPointerMove:function(e,t){var n=this;if(this.$el.hasPointerCapture(e.pointerId)&&(this.notesInHand.forEach(function(t){t.fineX+=e.movementX/(n.width/n.numBarsVisibleInViewport/16),t.fineY-=e.movementY/(n.height/n.numOctavesVisibleInViewport/12),t.x=Math.max(0,Math.round(t.fineX));var i=t.y;t.y=Math.round(t.fineY),t.pitch=t.y,1===n.notesInHand.length&&t.pitch!==i&&n.emitPreviewOn(t.pitch)}),e.ctrlKey)){var i=this.coordsToNote(e.offsetX,e.offsetY),o=i.xFine,r=i.yFine;this.selection.end.x=o,this.selection.end.y=r}(e.buttons&T.RIGHT_MOUSE)>0&&t&&this.removeNote(t)},emitPreviewOn:function(e){this.emitPreviewOff(),this.previewNote={id:"preview",pitch:e},this.$emit("noteOn",{note:this.previewNote,whenTime:this.audioContext.currentTime})},emitPreviewOff:function(){this.previewNote&&this.$emit("noteOff",{note:this.previewNote,whenTime:this.audioContext.currentTime})},onKeyDown:function(e){var t=this;(({Delete:function(){t.notes=t.notes.filter(function(e){return!e.selected})},KeyA:function(){e.ctrlKey&&t.notes.forEach(function(e){return e.selected=!0})}})[e.code]||function(){return null})()},onResizeNoteStart:function(e,t){e.target.setPointerCapture(e.pointerId)},onResizeNoteEnd:function(e,t){e.target.releasePointerCapture(e.pointerId)},onResizeNote:function(e,t){if(e.target.hasPointerCapture(e.pointerId)){var n=e.movementX/(this.width/this.numBarsVisibleInViewport),i=this.notes.filter(function(e){return e.selected});i.includes(t)||i.push(t),i.forEach(function(e){e.duration=Math.max(1/64,e.duration+n)})}},deselectAllNotes:function(){this.notes.forEach(function(e){return e.selected=!1})},coordsToNote:function(e,t){var n=this.width/this.numBarsVisibleInViewport,i=this.height/this.numOctavesVisibleInViewport,o=n/16,r=this.height*(this.noteHeight/100),s=(e+this.viewportStart*n)/o,a=(this.octaveStart*i+(this.height-t))/r,c=Math.floor(s),u=Math.floor(a);return{x:c,y:u,xFine:s,yFine:a}},exportNotes:function(){return this.notes.map(function(e){return{x:e.x,y:e.y}})},importNotes:function(e){var t=this;e.forEach(function(e){t.placeNote(e.x,e.y)})}}},L=I,q=(n("ab65"),Object(d["a"])(L,N,P,!1,null,"c9fb0042",null));q.options.__file="sequencer.vue";var $=q.exports,z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"scrollbarContainer",class:["scrollbar-container","scrollbar-container-"+e.orientation]},[n("div",{ref:"handle",class:["handle","handle-"+e.orientation,e.mode===e.MODES.move?"handle-active":""],style:e.handleStyle,on:{pointerdown:e.onPointerDown,pointerup:e.onPointerUp,pointermove:e.onPointerMove}},[n("div",{ref:"resizeStart",class:["resize-handle","resize-handle-"+e.orientation]}),n("div",{ref:"resizeEnd",class:["resize-handle","resize-handle-"+e.orientation]})])])},j=[],B=n("a322"),W={none:0,move:1,resizeStart:2,resizeEnd:3},F={name:"ZoomScrollbar",props:{orientation:{type:String,default:"horizontal",validator:function(e){return-1!==["horizontal","vertical"].indexOf(e)}},min:{type:Number,default:0},max:{type:Number,default:1},low:{type:Number,default:.25},high:{type:Number,default:.75},reverse:{type:Boolean,default:!1}},data:function(){return{MODES:W,mode:W.none,pointerStartPosition_:null}},methods:{onPointerDown:function(e){e.target===this.$refs["handle"]?this.mode=W.move:e.target===this.$refs.resizeStart?(this.mode=W.resizeStart,this.reverse&&(this.mode=W.resizeEnd)):e.target===this.$refs.resizeEnd&&(this.mode=W.resizeEnd,this.reverse&&(this.mode=W.resizeStart)),this.pointerStartPosition_={x:(e.clientX-this.$refs.handle.offsetLeft)/this.$refs.handle.offsetWidth,y:(e.clientY-this.$refs.handle.offsetTop)/this.$refs.handle.offsetHeight},e.target.setPointerCapture(e.pointerId)},onPointerUp:function(e){e.target.releasePointerCapture(e.pointerId),this.mode=W.none},onPointerMove:function(e){var t=this;if(e.target.hasPointerCapture(e.pointerId)){var n,i="horizontal"===this.orientation?e.movementX/(this.width/(this.max-this.min)):e.movementY/(this.height/(this.max-this.min)),o={x:this.pointerStartPosition_.x*this.$refs.handle.offsetWidth,y:this.pointerStartPosition_.y*this.$refs.handle.offsetHeight};if(this.reverse&&(i*=-1),"horizontal"===this.orientation){var r=e.clientX-this.$refs.handle.offsetLeft;(e.movementX<0&&r>o.x||e.movementX>0&&r<o.x)&&(i=0)}else{var s=e.clientY-this.$refs.handle.offsetTop;(e.movementY<0&&s>o.y||e.movementY>0&&s<o.y)&&(i=0)}((n={},Object(B["a"])(n,W.move,function(){var e,n;t.low+i<t.min?(e=t.min,n=t.high-(t.low-e)):t.high+i>t.max?(e=t.low+(t.max-t.high),n=t.max):(e=t.low+i,n=t.high+i),t.$emit("lowChanged",e),t.$emit("highChanged",n)}),Object(B["a"])(n,W.resizeStart,function(){var e;e=t.low+i<t.min?t.min:t.high-(t.low+i)>t.minDistance?t.low+i:t.high-t.minDistance,t.$emit("lowChanged",e)}),Object(B["a"])(n,W.resizeEnd,function(){var e;e=t.high+i>t.max?t.max:t.high+i-t.low>t.minDistance?t.high+i:t.low+t.minDistance,t.$emit("highChanged",e)}),n)[this.mode]||function(){return null})()}}},computed:{width:function(e){return parseInt(window.getComputedStyle(e.$refs.scrollbarContainer).width,10)},height:function(e){return parseInt(window.getComputedStyle(e.$refs.scrollbarContainer).height,10)},handleStyle:function(e){var t="calc(".concat((e.low-e.min)/(e.max-e.min)*100,"% - 1px)"),n="calc(".concat((e.high-e.low)/(e.max-e.min)*100,"% + 2px)");return e.reverse&&(t="calc(".concat(100*(1-(e.high-e.min)/(e.max-e.min)),"% - 1px)"),n="calc(".concat((e.high-e.low)/(e.max-e.min)*100,"% + 2px)")),{horizontal:{left:t,width:n},vertical:{top:t,height:n}}[e.orientation]},minDistance:function(e){return.1*(e.max-e.min)}}},Y=F,U=(n("ef22"),Object(d["a"])(Y,z,j,!1,null,"46013b70",null));U.options.__file="zoom-scrollbar.vue";var X=U.exports,G={tooltip:!1},J={horizontal:Object(D["a"])({},G,{width:200,height:5}),verticalADSR:Object(D["a"])({},G,{direction:"vertical",width:5,height:100,tooltip:"hover","tooltip-dir":"top"})},Q=n("dc0a"),Z=n("d328"),ee=n("11d9"),te=(n("7f7f"),n("20d6"),function(){function e(){Object(V["a"])(this,e),this.lookup={}}return Object(R["a"])(e,[{key:"addEventListener",value:function(e,t){e in this.lookup?t in this.lookup[e]||this.lookup[e].push(t):this.lookup[e]=[t]}},{key:"removeEventListener",value:function(e,t){if(e in this.lookup){var n=this.lookup[e].findIndex(function(e){return e===t});n>=0&&this.lookup[e].splice(n,1)}}},{key:"dispatchEvent",value:function(e,t){e in this.lookup&&this.lookup[e].forEach(function(e){e(t)})}}],[{key:"createObservableMember",value:function(t,n){var i=this;e.staticLookup[this.name]=e.staticLookup[this.name]||{};var o=n;Object.defineProperty(this.prototype.constructor.prototype.constructor,t,{get:function(){return o},set:function(e){o=e,i.dispatchEvent("".concat(t,"Changed"),e)}})}},{key:"addEventListener",value:function(t,n){t in e.staticLookup[this.name]?n in e.staticLookup[this.name][t]||e.staticLookup[this.name][t].push(n):e.staticLookup[this.name][t]=[n]}},{key:"removeEventListener",value:function(t,n){if(t in e.staticLookup[this.name]){var i=e.staticLookup[this.name][t].findIndex(function(e){return e===n});i>=0&&e.staticLookup[this.name][t].splice(i,1)}}},{key:"dispatchEvent",value:function(t,n){t in e.staticLookup[this.name]&&e.staticLookup[this.name][t].forEach(function(e){e(n)})}}]),e}());Object(B["a"])(te,"staticLookup",{});var ne=function(){function e(t,n){Object(V["a"])(this,e),this.ctx=n,this.constantSource=n.createConstantSource(),this.attack=0,this.decay=0,this.sustain=1,this.release=.5,this.tension=.2,this.amplitude=t,this.connect=this.constantSource.connect.bind(this.constantSource)}return Object(R["a"])(e,[{key:"noteOn",value:function(e){this.constantSource.offset.cancelScheduledValues(e),this.constantSource.offset.setValueAtTime(0,e),this.constantSource.offset.setTargetAtTime(this.amplitude,e,this.tension*this.attack),this.constantSource.offset.setTargetAtTime(this.amplitude*this.sustain,e+this.attack,this.tension*this.decay),this.constantSource.start(e)}},{key:"noteOff",value:function(e){this.constantSource.offset.cancelAndHoldAtTime(e),this.constantSource.offset.setTargetAtTime(0,e,this.tension*this.release)}}]),e}(),ie=function(){for(var e=[],t=0;t<127;++t)e[t]=13.75*Math.pow(2,(t-9)/12);return function(t){return e[t]}}(),oe={sine:"sine",square:"square",sawtooth:"sawtooth",triangle:"triangle"},re=function(e){function t(e){var n;Object(V["a"])(this,t),n=Object(Z["a"])(this,Object(ee["a"])(t).call(this)),n.audioCtx=e,n.osc1Nodes=[];for(var i=0;i<t.osc1voices;i++)n.osc1Nodes[i]=e.createOscillator(),n.osc1Nodes[i].type=t.osc1shape;if(n.osc2Nodes=[],t.osc2active)for(var o=0;o<t.osc2voices;o++)n.osc2Nodes[o]=e.createOscillator(),n.osc2Nodes[o].type=t.osc2shape;return n.biquadFilter=e.createBiquadFilter(),n.osc1gainNode=e.createGain(),n.osc2gainNode=e.createGain(),n.osc1volumeADSR=new ne(t.osc1volume/t.osc1voices,e),n.osc1volumeADSR.attack=t.volumeAttack,n.osc1volumeADSR.decay=t.volumeDecay,n.osc1volumeADSR.sustain=t.volumeSustain,n.osc1volumeADSR.release=t.volumeRelease,n.osc2volumeADSR=new ne(t.osc2volume/t.osc2voices,e),n.osc2volumeADSR.attack=t.volumeAttack,n.osc2volumeADSR.decay=t.volumeDecay,n.osc2volumeADSR.sustain=t.volumeSustain,n.osc2volumeADSR.release=t.volumeRelease,n.filterADSR=new ne((22e3-t.filterCutoff)*t.filterEnvelopeAmount,e),n.filterADSR.attack=t.filterAttack,n.filterADSR.decay=t.filterDecay,n.filterADSR.sustain=t.filterSustain,n.filterADSR.release=t.filterRelease,n.biquadFilter.type="lowpass",n.biquadFilter.Q.setValueAtTime(t.filterResonance,e.currentTime),n.osc1gainNode.gain.setValueAtTime(0,e.currentTime),n.osc2gainNode.gain.setValueAtTime(0,e.currentTime),n.osc1volumeADSR.connect(n.osc1gainNode.gain),n.osc2volumeADSR.connect(n.osc2gainNode.gain),n.filterADSR.connect(n.biquadFilter.frequency),n.filterADSR.tension=.5,n.osc1Nodes.forEach(function(e){e.connect(n.osc1gainNode).connect(n.biquadFilter)}),n.osc2Nodes.forEach(function(e){e.connect(n.osc2gainNode).connect(n.biquadFilter)}),n.connect=n.biquadFilter.connect.bind(n.biquadFilter),n.disconnect=n.biquadFilter.disconnect.bind(n.biquadFilter),t.addEventListener("osc1shapeChanged",function(){}),n}return Object(R["a"])(t,[{key:"noteOn",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.audioCtx.currentTime;n=Math.max(n,this.audioCtx.currentTime),this.biquadFilter.frequency.setValueAtTime(t.filterCutoff,n);for(var i=0;i<this.osc1Nodes.length;i++){var o=t.osc1octave,r=t.osc1detune,s=t.osc1pitch,a=ie(e+12*o+s),c=i%2===0?1:-1;a+=a*r*c*2e-5,this.osc1Nodes[i].frequency.setValueAtTime(a,n),this.osc1Nodes[i].start(n)}for(var u=0;u<this.osc2Nodes.length;u++){var l=t.osc2octave,h=t.osc2detune,f=t.osc2pitch,v=ie(e+12*l+f),d=u%2===0?1:-1;v+=v*h*d*2e-5,this.osc2Nodes[u].frequency.setValueAtTime(v,n),this.osc2Nodes[u].start(n)}this.osc1volumeADSR.noteOn(n),this.osc2volumeADSR.noteOn(n),this.filterADSR.noteOn(n)}},{key:"noteOff",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.audioCtx.currentTime;n=Math.max(n,this.audioCtx.currentTime),this.osc1volumeADSR.noteOff(n),this.osc2volumeADSR.noteOff(n),this.filterADSR.noteOff(n);for(var i=0;i<this.osc1Nodes.length;i++)this.osc1Nodes[i].stop(n+t.volumeRelease);for(var o=0;o<this.osc2Nodes.length;o++)this.osc2Nodes[o].stop(n+t.volumeRelease);window.setTimeout(function(){e.osc1gainNode.disconnect(),e.osc2gainNode.disconnect(),e.biquadFilter.disconnect(),e.dispatchEvent("voiceDonePlaying")},1e3*(n+t.volumeRelease-this.audioCtx.currentTime))}}]),Object(Q["a"])(t,e),t}(te);re.createObservableMember("filterCutoff",1),re.createObservableMember("filterResonance",0),re.createObservableMember("osc1shape",oe.sawtooth),re.createObservableMember("osc1active",!0),re.createObservableMember("osc1voices",1),re.createObservableMember("osc1detune",0),re.createObservableMember("osc1octave",0),re.createObservableMember("osc1pitch",0),re.createObservableMember("osc1volume",1),re.createObservableMember("osc2shape",oe.square),re.createObservableMember("osc2active",!1),re.createObservableMember("osc2voices",1),re.createObservableMember("osc2detune",0),re.createObservableMember("osc2octave",0),re.createObservableMember("osc2pitch",0),re.createObservableMember("osc2volume",1),re.createObservableMember("volume",.1),re.createObservableMember("volumeAttack",0),re.createObservableMember("volumeDecay",.5),re.createObservableMember("volumeSustain",.05),re.createObservableMember("volumeRelease",.5),re.createObservableMember("filterEnvelopeAmount",1),re.createObservableMember("filterAttack",0),re.createObservableMember("filterDecay",.5),re.createObservableMember("filterSustain",.05),re.createObservableMember("filterRelease",.5);var se=document.createElement("a"),ae=null;function ce(e,t){var n=new Blob([JSON.stringify(e)],{type:"application/json"});ae&&URL.revokeObjectURL(ae),ae=URL.createObjectURL(n),se.href=ae,se.download=t,se.click()}n("96cf");var ue=n("3040"),le=(n("f654"),document.createElement("input"));function he(e){return fe.apply(this,arguments)}function fe(){return fe=Object(ue["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var i=new FileReader;i.addEventListener("load",function(t){e(JSON.parse(t.target.result))}),t instanceof File?i.readAsText(t):n(new Error("No valid file selected."))}));case 1:case"end":return e.stop()}},e,this)})),fe.apply(this,arguments)}function ve(){return de.apply(this,arguments)}function de(){return de=Object(ue["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,t){le.value=null,le.click(),le.oninput=Object(ue["a"])(regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,he(le.files[0]);case 3:i=n.sent,e(i),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),t(n.t0);case 10:case"end":return n.stop()}},n,this,[[0,7]])}))}));case 1:case"end":return e.stop()}},e,this)})),de.apply(this,arguments)}le.type="file",le.accept="application/json",le.multiple=!1;var pe={},me=(function(){var e=0}(),[]);window.voices=pe;var be={name:"app",components:{knob:m,vueSlider:g.a,vueKeyboard:A,vueSequencer:$,zoomScrollbar:X},data:function(){return{sliderConfig:J,SHAPES:oe,audioCtx:new AudioContext,bpm:120,volume:.05,oscillators:[{shape:oe.sawtooth,active:!0,voices:1,detune:0,octave:0,pitch:0,volume:1},{shape:oe.square,active:!1,voices:1,detune:0,octave:0,pitch:0,volume:1}],mainGainNode:null,filterCutoff:22e3,filterResonance:0,volumeA:0,volumeD:0,volumeS:1,volumeR:.01,filterEnvelopeAmount:0,filterA:0,filterD:.5,filterS:0,filterR:.01,horizontalLow:0,horizontalHigh:1,verticalLow:4,verticalHigh:5}},computed:{osc1active:function(e){return e.oscillators[0].active},osc1shape:function(e){return e.oscillators[0].shape},osc1voices:function(e){return e.oscillators[0].voices},osc1detune:function(e){return e.oscillators[0].detune},osc1octave:function(e){return e.oscillators[0].octave},osc1pitch:function(e){return e.oscillators[0].pitch},osc1volume:function(e){return e.oscillators[0].volume},osc2active:function(e){return e.oscillators[1].active},osc2shape:function(e){return e.oscillators[1].shape},osc2voices:function(e){return e.oscillators[1].voices},osc2detune:function(e){return e.oscillators[1].detune},osc2octave:function(e){return e.oscillators[1].octave},osc2pitch:function(e){return e.oscillators[1].pitch},osc2volume:function(e){return e.oscillators[1].volume}},watch:{volume:function(e,t){this.mainGainNode.gain.setValueAtTime(e,this.audioCtx.currentTime)}},mounted:function(){var e=this;this.mainGainNode=this.audioCtx.createGain(),this.mainGainNode.connect(this.audioCtx.destination),this.mainGainNode.gain.setValueAtTime(this.volume,this.audioCtx.currentTime);var t=function(t,n,i,o){e.$watch(function(){return e[t]},function(){n[i]=o?o(e[t]):e[t]},{immediate:!0})};t("volumeA",re,"volumeAttack"),t("volumeD",re,"volumeDecay"),t("volumeS",re,"volumeSustain"),t("volumeR",re,"volumeRelease"),t("osc1active",re,"osc1active"),t("osc1shape",re,"osc1shape"),t("osc1voices",re,"osc1voices"),t("osc1detune",re,"osc1detune"),t("osc1octave",re,"osc1octave"),t("osc1pitch",re,"osc1pitch"),t("osc1volume",re,"osc1volume"),t("osc2active",re,"osc2active"),t("osc2shape",re,"osc2shape"),t("osc2voices",re,"osc2voices"),t("osc2detune",re,"osc2detune"),t("osc2octave",re,"osc2octave"),t("osc2pitch",re,"osc2pitch"),t("osc2volume",re,"osc2volume"),t("filterCutoff",re,"filterCutoff"),t("filterResonance",re,"filterResonance"),t("filterEnvelopeAmount",re,"filterEnvelopeAmount"),t("filterA",re,"filterAttack",function(e){return Math.pow(e,2)}),t("filterD",re,"filterDecay",function(e){return Math.pow(e,2)}),t("filterS",re,"filterSustain",function(e){return Math.pow(e,2)}),t("filterR",re,"filterRelease",function(e){return Math.pow(e,2)})},methods:{onKeyboardNoteOn:function(e){var t=e.pitch,n=e.id;this.noteOn(n,t)},onKeyboardNoteOff:function(e){var t=e.pitch,n=e.id;this.noteOff(n,t)},onSequencerNoteOn:function(e){var t=this,n=e.note,i=e.whenTime,o=n.pitch,r=n.id,s=i-this.audioCtx.currentTime,a=window.setTimeout(function(){t.$refs.keyboard.keyDown(o,!1);var e=me.indexOf(a);me.splice(e,1)},1e3*s);me.push(a),this.noteOn(r,o,i)},onSequencerNoteOff:function(e){var t=this,n=e.note,i=e.whenTime,o=n.pitch,r=n.id,s=i-this.audioCtx.currentTime,a=window.setTimeout(function(){t.$refs.keyboard.keyUp(o,!1);var e=me.indexOf(a);me.splice(e,1)},1e3*s);me.push(a),this.noteOff(r,o,i)},onSequencerStop:function(){this.stopAllNotes()},onScrollHorizontalLowChanged:function(e){this.horizontalLow=e},onScrollHorizontalHighChanged:function(e){this.horizontalHigh=e},onScrollVerticalLowChanged:function(e){this.verticalLow=e},onScrollVerticalHighChanged:function(e){this.verticalHigh=e},stopAllNotes:function(){this.$refs.keyboard.releaseAllKeys(),me.forEach(function(e){window.clearTimeout(e)}),me=[],Object.values(pe).forEach(function(e){e.forEach(function(e){e.noteOff()}),e.length=0})},noteOn:function(e,t,n){var i=new re(this.audioCtx);return e in pe?pe[e].push(i):pe[e]=[i],i.connect(this.mainGainNode),i.noteOn(t,n),i.addEventListener("voiceDonePlaying",function(){pe[e]=pe[e].filter(function(e){return e!==i})}),i},noteOff:function(e,t,n){if(e in pe&&pe[e].length>0){var i=pe[e][pe[e].length-1];i.noteOff(n)}},togglePlaying:function(){this.$refs.sequencer.playing?this.$refs.sequencer.stop():this.$refs.sequencer.play()},exportNotes:function(){var e=this.$refs.sequencer.exportNotes();ce(e,"mySong")},importNotes:function(){var e=this;ve().then(function(t){e.$refs.sequencer.importNotes(t)})},test:function(){var e=this.audioCtx.currentTime,t=this.audioCtx.createConstantSource(),n=this.audioCtx.createAnalyser();t.connect(n),t.offset.setTargetAtTime(1,e,0),t.start(e),t.offset.cancelAndHoldAtTime(e+2),t.offset.setTargetAtTime(0,e+2,.002),t.offset.cancelAndHoldAtTime(e+1),t.offset.setTargetAtTime(0,e+1,.002)}}};window.Voice=re;var ge=be,ye=(n("5c0b"),Object(d["a"])(ge,o,r,!1,null,null,null));ye.options.__file="App.vue";var we=ye.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(we)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var i=n("2856"),o=n.n(i);o.a},8628:function(e,t,n){},"8b45":function(e,t,n){},ab65:function(e,t,n){"use strict";var i=n("e54d"),o=n.n(i);o.a},e54d:function(e,t,n){},ebc8:function(e,t,n){"use strict";var i=n("8628"),o=n.n(i);o.a},ef22:function(e,t,n){"use strict";var i=n("5263"),o=n.n(i);o.a}});
//# sourceMappingURL=app.669c7630.js.map